/*! For license information please see main.js.LICENSE.txt */
!function(){"use strict";var t,e={9337:function(t,e,r){function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function o(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,i(n.key),n)}}function i(t){var e=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,"string");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===n(e)?e:String(e)}r(4812),r(6649),r(6078),r(2526),r(1817),r(1539),r(9653),r(9070),r(8674),r(2165),r(6992),r(8783),r(3948),r(2443),r(9341),r(3706),r(2703),r(8011),r(489),r(9554),r(4747),r(8309),r(8304),r(7042),r(9826),r(6699),r(2023),r(2222);var a=new(function(){function t(e){var r,n,o;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,o="https://sb-cats.herokuapp.com/api/2/",(n=i(n="_baseURL"))in r?Object.defineProperty(r,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[n]=o,this.author=e}var e,r;return e=t,(r=[{key:"getCats",value:function(){return fetch("".concat(this._baseURL).concat(this.author,"/show"))}},{key:"getCat",value:function(t){return fetch("".concat(this._baseURL).concat(this.author,"/show/").concat(t))}},{key:"getIds",value:function(){return fetch("".concat(this._baseURL).concat(this.author,"/ids"))}},{key:"addCat",value:function(t){return fetch("".concat(this._baseURL).concat(this.author,"/add"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)})}},{key:"updCat",value:function(t,e){return fetch("".concat(this._baseURL).concat(this.author,"/update/").concat(t),{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)})}},{key:"delCat",value:function(t){return fetch("".concat(this._baseURL).concat(this.author,"/delete/").concat(t),{method:"DELETE"})}}])&&o(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}())("amy");function c(t){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c(t)}function s(){s=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function f(t,e,r,o){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),c=new j(o||[]);return n(a,"_invoke",{value:x(t,r,c)}),a}function h(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=f;var d={};function v(){}function p(){}function y(){}var m={};l(m,i,(function(){return this}));var g=Object.getPrototypeOf,b=g&&g(g(O([])));b&&b!==e&&r.call(b,i)&&(m=b);var w=y.prototype=v.prototype=Object.create(m);function E(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function k(t,e){function o(n,i,a,s){var u=h(t[n],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==c(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){o("next",t,a,s)}),(function(t){o("throw",t,a,s)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return o("throw",t,a,s)}))}s(u.arg)}var i;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return i=i?i.then(n,n):n()}})}function x(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=L(a,r);if(c){if(c===d)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var s=h(t,e,r);if("normal"===s.type){if(n=r.done?"completed":"suspendedYield",s.arg===d)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(n="completed",r.method="throw",r.arg=s.arg)}}}function L(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,L(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),d;var o=h(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,d;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,d):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,d)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function _(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function O(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:C}}function C(){return{value:void 0,done:!0}}return p.prototype=y,n(w,"constructor",{value:y,configurable:!0}),n(y,"constructor",{value:p,configurable:!0}),p.displayName=l(y,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,l(t,u,"GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},E(k.prototype),l(k.prototype,a,(function(){return this})),t.AsyncIterator=k,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new k(f(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},E(w),l(w,u,"Generator"),l(w,i,(function(){return this})),l(w,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=O,j.prototype={constructor:j,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),s=r.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),_(r),d}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;_(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:O(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),d}},t}function u(t,e,r,n,o,i,a){try{var c=t[i](a),s=c.value}catch(t){return void r(t)}c.done?e(s):Promise.resolve(s).then(n,o)}function l(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){u(i,n,o,a,c,"next",t)}function c(t){u(i,n,o,a,c,"throw",t)}a(void 0)}))}}function f(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==c(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==c(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===c(o)?o:String(o)),n)}var o}var h=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.state={catsData:[]}}var e,r,n,o,i;return e=t,r=[{key:"getCatsData",value:(i=l(s().mark((function t(){var e;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e=this.getDataFromLS("cats"))){t.next=5;break}this.state.catsData=e,t.next=7;break;case 5:return t.next=7,this.loadData();case 7:case"end":return t.stop()}}),t,this)}))),function(){return i.apply(this,arguments)})},{key:"getCatById",value:function(t){return this.state.catsData.find((function(e){return e.id===t}))}},{key:"loadData",value:(o=l(s().mark((function t(){var e,r;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,a.getCats();case 3:if(!(e=t.sent).ok){t.next=12;break}return t.next=7,e.json();case 7:r=t.sent,this.state.catsData=r.data,this.saveDataInLS("cats",r.data),t.next=13;break;case 12:throw new Error("Ошибка загрузки данных");case 13:t.next=18;break;case 15:throw t.prev=15,t.t0=t.catch(0),t.t0;case 18:case"end":return t.stop()}}),t,this,[[0,15]])}))),function(){return o.apply(this,arguments)})},{key:"getDataFromLS",value:function(t){try{var e=localStorage.getItem(t);return e?JSON.parse(e):null}catch(t){throw t}}},{key:"saveDataInLS",value:function(t,e){localStorage.setItem(t,JSON.stringify(e))}},{key:"validateCatData",value:function(t){var e={valid:!0,message:""};for(var r in t)if("string"==typeof t[r]){if(!t[r].length){e.valid=!1,e.message="Заполните все поля!";break}if("img_link"===r&&!t[r].includes("http")){e.valid=!1,e.message="Введите корректную ссылку!";break}}return e}},{key:"postCat",value:(n=l(s().mark((function t(e){var r;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,a.addCat(e);case 3:if(!(r=t.sent).ok){t.next=11;break}return t.next=7,r.json();case 7:return e=t.sent,t.abrupt("return",e.message);case 11:return t.abrupt("return",null);case 12:t.next=17;break;case 14:throw t.prev=14,t.t0=t.catch(0),t.t0;case 17:case"end":return t.stop()}}),t,null,[[0,14]])}))),function(t){return n.apply(this,arguments)})}],r&&f(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}(),d=new h;function v(t){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},v(t)}function p(t){return function(t){if(Array.isArray(t))return y(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return y(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?y(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function m(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==v(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==v(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===v(o)?o:String(o)),n)}var o}r(1038),r(9753),r(4916);var g=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.collectFormData=this.collectFormData.bind(this),this.setPreview=this.setPreview.bind(this),this.form=document.createElement("form"),this.form.className="add-form",this.container=document.createElement("div"),this.formError=document.createElement("div"),this.formError.className="form__error",this.form.innerHTML='\n                        <div div class = "add-form__img"\n                        style="background-image:url(\'https://cdn-icons-png.flaticon.com/512/1089/1089421.png\')"></div>\n                        <input type="number" name="id" min="1" required placeholder="id">\n                        <input type="number" name="age" placeholder="Возраст">\n                        <input type="text" name="name" required placeholder="Имя">\n                        <input type="number" name="rate" placeholder="Рейтинг (0-10)" min="0" max="10">\n                        <textarea name="description" placeholder="Описание"></textarea>\n                        <label>Любимчик <input type="checkbox" name="favourite" placeholder=""></label>\n                        <input id="link" type="text" name="img_link" placeholder="Ссылка на фото">\n                        <button type="submit">Добавить котика</button>\n        ',this.container.insertAdjacentHTML("afterbegin",'<h2 class="add-form__title">Добавить питомца</h2>'),this.container.append(this.form,this.formError),this.fields=Array.from([].concat(p(this.form.querySelectorAll("input")),p(this.form.querySelectorAll("textarea")))),this.linkInput=this.form.querySelector("#link"),this.preview=this.form.querySelector(".add-form__img")}var e,r;return e=t,(r=[{key:"render",value:function(t){t.appendChild(this.container),this.linkInput.addEventListener("change",this.setPreview)}},{key:"setPreview",value:function(t){t.target.value&&t.target.value.includes("http")?this.preview.style.backgroundImage="url(".concat(t.target.value,")"):this.preview.style.backgroundImage="url('https://cdn0.iconfinder.com/data/icons/file-and-document-41/100/file_document_doc-23-512.png')"}},{key:"showError",value:function(t){this.formError.innerHTML="<div>".concat(t,"</div>"),this.formError.style.height=this.formError.scrollHeight+"px"}},{key:"hideError",value:function(){this.formError.style.height="0px"}},{key:"collectFormData",value:function(){this.hideError();var t={};return this.fields.forEach((function(e){"checkbox"===e.type?t[e.name]=!!e.checked:t[e.name]=e.value})),t}},{key:"reset",value:function(){this.linkInput.removeEventListener("change",this.setPreview),this.preview.style.backgroundImage="url('https://cdn-icons-png.flaticon.com/512/1089/1089421.png')",this.form.reset(),this.hideError()}}])&&m(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}(),b=(r(2564),function(t){var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:document,o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];"function"==typeof CustomEvent?e=new CustomEvent(t,{detail:r,bubbles:o}):(e=document.createEvent("CustomEvent")).initCustomEvent(t,o,!1,r),n.dispatchEvent(e)}),w=function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:document;r.addEventListener(t,e)},E=function(t){var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200;return function(){var n=arguments,o=this;e&&clearTimeout(e),e=setTimeout((function(){return t.apply(o,n)}),r)}};function k(t){return k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},k(t)}function x(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==k(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==k(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===k(o)?o:String(o)),n)}var o}var L=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.showFormError=this.showFormError.bind(this),this.hideModal=this.hideModal.bind(this),this.hideModalByOverlay=this.hideModalByOverlay.bind(this),this.showForm=this.showForm.bind(this),this.emitFormData=this.emitFormData.bind(this),this.cardsContainer=document.querySelector(".cards"),this.modal=document.querySelector("#popup"),this.modalContent=this.modal.querySelector(".popup__content"),this.addBtn=document.getElementById("add"),this.modalCloseBtn=this.modal.querySelector("#popup-close"),this.addForm=new g}var e,r;return e=t,r=[{key:"showCards",value:function(t){var e="";t.forEach((function(t){e+='\n                <div data-id="'.concat(t.id,'" class="card" style="background-image: url(').concat(t.img_link,'">\n                    ').concat(t.favourite?'<i class="like fa-solid fa-heart"></i>':"",'\n                    <span class="card__name">').concat(t.name,'<i class="fa-solid fa-magnifying-glass-plus"></i></span>\n                </div>\n            ')})),this.cardsContainer.innerHTML=e,this.fitCards()}},{key:"fitCards",value:function(){document.querySelectorAll(".card").forEach((function(t){t.style.height=.6*t.offsetWidth+"px"}))}},{key:"showPreloader",value:function(){this.cardsContainer.innerHTML='<div class="preloader"><i class="fa-solid fa-paw"></div>'}},{key:"showErrorMessage",value:function(t){this.cardsContainer.innerHTML='\n        <div class="error">\n            <div class="error__icon"></div>\n            <div class="error__content">\n                    <h1 class="error__title">Упс!<br/>Что-то пошло не так...</h1> \n                    <p class="error__text">'.concat(t,"</p> \n            </div>\n        </div>   \n        ")}},{key:"showDetails",value:function(t){this.modalContent.innerHTML='\n        <div class="details">\n            <h2 class="details__name">'.concat(t.name,'</h2>\n            <div class="details__img">\n                <img src="').concat(t.img_link,'" alt="cat photo"/>\n            </div>\n            <div class="details__age">Возраст: ').concat(t.age,'</div>\n            <div class="details__rate">Рейтинг: ').concat(t.rate,'</div>\n            <div class="details__fav">\n                Любимчик: ').concat(t.favourite?'<i class="fa-solid fa-check"></i>':'<i class="fa-solid fa-xmark"></i>','\n            </div>\n            <p class="details__about">').concat(t.description,"</p>\n        </div>\n    "),this._showModal()}},{key:"emitFormData",value:function(t){t.preventDefault();var e=this.addForm.collectFormData();b("cat:post",e)}},{key:"showForm",value:function(){this.addForm.render(this.modalContent),w("submit",this.emitFormData,this.addForm.form),this._showModal()}},{key:"showFormError",value:function(t){this.addForm.showError(t)}},{key:"hideFormError",value:function(){this.addForm.hideError()}},{key:"_showModal",value:function(){this.modal.classList.contains("active")||(this.modal.parentElement.classList.add("active"),this.modal.classList.add("active"))}},{key:"hideModal",value:function(){this.modal.classList.contains("active")&&(this.modal.parentElement.classList.remove("active"),this.modal.classList.remove("active"),this.modal.querySelector(".add-form")&&(this.addForm.reset(),function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:document;r.removeEventListener(t,e)}("submit",this.emitFormData,this.addForm.form)),this.modalContent.innerHTML="")}},{key:"hideModalByOverlay",value:function(t){t.target===this.modal.parentElement&&this.hideModal()}}],r&&x(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}(),S=new L;function _(t){return _="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_(t)}function j(){j=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function u(t,e,r,o){var i=e&&e.prototype instanceof h?e:h,a=Object.create(i.prototype),c=new S(o||[]);return n(a,"_invoke",{value:E(t,r,c)}),a}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var f={};function h(){}function d(){}function v(){}var p={};s(p,i,(function(){return this}));var y=Object.getPrototypeOf,m=y&&y(y(O([])));m&&m!==e&&r.call(m,i)&&(p=m);var g=v.prototype=h.prototype=Object.create(p);function b(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function w(t,e){function o(n,i,a,c){var s=l(t[n],t,i);if("throw"!==s.type){var u=s.arg,f=u.value;return f&&"object"==_(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){o("next",t,a,c)}),(function(t){o("throw",t,a,c)})):e.resolve(f).then((function(t){u.value=t,a(u)}),(function(t){return o("throw",t,a,c)}))}c(s.arg)}var i;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return i=i?i.then(n,n):n()}})}function E(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=k(a,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var s=l(t,e,r);if("normal"===s.type){if(n=r.done?"completed":"suspendedYield",s.arg===f)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(n="completed",r.method="throw",r.arg=s.arg)}}}function k(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,k(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=l(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,f;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function x(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function L(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(x,this),this.reset(!0)}function O(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:C}}function C(){return{value:void 0,done:!0}}return d.prototype=v,n(g,"constructor",{value:v,configurable:!0}),n(v,"constructor",{value:d,configurable:!0}),d.displayName=s(v,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,s(t,c,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},b(w.prototype),s(w.prototype,a,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new w(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},b(g),s(g,c,"Generator"),s(g,i,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=O,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(L),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),s=r.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),L(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;L(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:O(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}function O(t,e,r,n,o,i,a){try{var c=t[i](a),s=c.value}catch(t){return void r(t)}c.done?e(s):Promise.resolve(s).then(n,o)}function C(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){O(i,n,o,a,c,"next",t)}function c(t){O(i,n,o,a,c,"throw",t)}a(void 0)}))}}function P(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==_(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==_(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===_(o)?o:String(o)),n)}var o}var F=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.getDetails=this.getDetails.bind(this),this.mainContainer=document.getElementById("appMain"),this.modal=document.getElementById("popup"),this.addBtn=document.getElementById("add"),this.modalCloseBtn=this.modal.querySelector("#popup-close")}var e,r,n,o;return e=t,r=[{key:"setEventListeners",value:function(){var t=this;w("loading:error",(function(t){return S.showErrorMessage(t.detail.message)})),w("cat:post",(function(e){return t.addNewCat(e.detail)})),this.mainContainer.addEventListener("click",this.getDetails),this.addBtn.addEventListener("click",S.showForm),this.modalCloseBtn.addEventListener("click",S.hideModal),this.modal.parentElement.addEventListener("click",S.hideModalByOverlay)}},{key:"getDetails",value:function(t){if(t.target.closest(".card")&&t.target.closest(".card").dataset.id){var e=d.getCatById(+t.target.closest(".card").dataset.id);e&&S.showDetails(e)}}},{key:"addNewCat",value:(o=C(j().mark((function t(e){var r,n,o,i;return j().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,r=d.validateCatData(e),n=r.valid,o=r.message,!n){t.next=16;break}return t.next=5,d.postCat(e);case 5:if("ok"===(i=t.sent)){t.next=9;break}return S.showFormError(i||"Ошибка загрузки данных"),t.abrupt("return");case 9:return S.hideModal(),S.showPreloader(),t.next=13,d.loadData();case 13:S.showCards(d.state.catsData),t.next=17;break;case 16:S.showFormError(o);case 17:t.next=22;break;case 19:t.prev=19,t.t0=t.catch(0),b("loading:error",{message:t.t0.message});case 22:case"end":return t.stop()}}),t,null,[[0,19]])}))),function(t){return o.apply(this,arguments)})},{key:"init",value:(n=C(j().mark((function t(){return j().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.setEventListeners(),S.showPreloader(),t.prev=2,t.next=5,d.getCatsData();case 5:S.showCards(d.state.catsData),w("resize",E(S.fitCards),window),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),b("loading:error",{message:t.t0.message});case 12:case"end":return t.stop()}}),t,this,[[2,9]])}))),function(){return n.apply(this,arguments)})}],r&&P(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();window.addEventListener("DOMContentLoaded",(function(){(new F).init()}))},4353:function(){}},r={};function n(t){var o=r[t];if(void 0!==o)return o.exports;var i=r[t]={exports:{}};return e[t](i,i.exports,n),i.exports}n.m=e,t=[],n.O=function(e,r,o,i){if(!r){var a=1/0;for(l=0;l<t.length;l++){r=t[l][0],o=t[l][1],i=t[l][2];for(var c=!0,s=0;s<r.length;s++)(!1&i||a>=i)&&Object.keys(n.O).every((function(t){return n.O[t](r[s])}))?r.splice(s--,1):(c=!1,i<a&&(a=i));if(c){t.splice(l--,1);var u=o();void 0!==u&&(e=u)}}return e}i=i||0;for(var l=t.length;l>0&&t[l-1][2]>i;l--)t[l]=t[l-1];t[l]=[r,o,i]},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},function(){var t={179:0};n.O.j=function(e){return 0===t[e]};var e=function(e,r){var o,i,a=r[0],c=r[1],s=r[2],u=0;if(a.some((function(e){return 0!==t[e]}))){for(o in c)n.o(c,o)&&(n.m[o]=c[o]);if(s)var l=s(n)}for(e&&e(r);u<a.length;u++)i=a[u],n.o(t,i)&&t[i]&&t[i][0](),t[i]=0;return n.O(l)},r=self.webpackChunkcats=self.webpackChunkcats||[];r.forEach(e.bind(null,0)),r.push=e.bind(null,r.push.bind(r))}(),n.O(void 0,[356],(function(){return n(9337)}));var o=n.O(void 0,[356],(function(){return n(4353)}));o=n.O(o)}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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TUFBSyxTQUFTaEwsR0FBTSxPQUErQixJQUF4QjBLLEVBQWdCMUssRUFBVyxJQUFJLENBQ3JFLElBQUk4SSxLQUFZZ0MsRUFDWmpDLEVBQW9CdUIsRUFBRVUsRUFBYWhDLEtBQ3JDRCxFQUFvQk8sRUFBRU4sR0FBWWdDLEVBQVloQyxJQUdoRCxHQUFHaUMsRUFBUyxJQUFJbkosRUFBU21KLEVBQVFsQyxFQUNsQyxDQUVBLElBREdnQyxHQUE0QkEsRUFBMkI1SyxHQUNyRDJILEVBQUkwQixFQUFTdkgsT0FBUTZGLElBQ3pCK0MsRUFBVXJCLEVBQVMxQixHQUNoQmlCLEVBQW9CdUIsRUFBRU0sRUFBaUJDLElBQVlELEVBQWdCQyxJQUNyRUQsRUFBZ0JDLEdBQVMsS0FFMUJELEVBQWdCQyxHQUFXLEVBRTVCLE9BQU85QixFQUFvQlEsRUFBRXpILEVBQzlCLEVBRUlxSixFQUFxQkMsS0FBdUIsaUJBQUlBLEtBQXVCLGtCQUFLLEdBQ2hGRCxFQUFtQmpILFFBQVE0RyxFQUFxQnhJLEtBQUssS0FBTSxJQUMzRDZJLEVBQW1CRSxLQUFPUCxFQUFxQnhJLEtBQUssS0FBTTZJLEVBQW1CRSxLQUFLL0ksS0FBSzZJLE9DL0N2RnBDLEVBQW9CUSxPQUFFTCxFQUFXLENBQUMsTUFBTSxXQUFhLE9BQU9ILEVBQW9CLEtBQU8sSUFDdkYsSUFBSXVDLEVBQXNCdkMsRUFBb0JRLE9BQUVMLEVBQVcsQ0FBQyxNQUFNLFdBQWEsT0FBT0gsRUFBb0IsS0FBTyxJQUNqSHVDLEVBQXNCdkMsRUFBb0JRLEVBQUUrQiIsInNvdXJjZXMiOlsid2VicGFjazovL2NhdHMvd2VicGFjay9ydW50aW1lL2NodW5rIGxvYWRlZCIsIndlYnBhY2s6Ly9jYXRzLy4vc3JjL3NjcmlwdHMvYXBpLmpzIiwid2VicGFjazovL2NhdHMvLi9zcmMvc2NyaXB0cy9BcHBNb2RlbC5qcyIsIndlYnBhY2s6Ly9jYXRzLy4vc3JjL3NjcmlwdHMvQWRkRm9ybS5qcyIsIndlYnBhY2s6Ly9jYXRzLy4vc3JjL3NjcmlwdHMvaGVscGVycy5qcyIsIndlYnBhY2s6Ly9jYXRzLy4vc3JjL3NjcmlwdHMvYXBwVmlldy5qcyIsIndlYnBhY2s6Ly9jYXRzLy4vc3JjL3NjcmlwdHMvYXBwQ29udHJvbGxlci5qcyIsIndlYnBhY2s6Ly9jYXRzLy4vc3JjL3NjcmlwdHMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vY2F0cy93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9jYXRzL3dlYnBhY2svcnVudGltZS9nbG9iYWwiLCJ3ZWJwYWNrOi8vY2F0cy93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kIiwid2VicGFjazovL2NhdHMvd2VicGFjay9ydW50aW1lL2pzb25wIGNodW5rIGxvYWRpbmciLCJ3ZWJwYWNrOi8vY2F0cy93ZWJwYWNrL3N0YXJ0dXAiXSwic291cmNlc0NvbnRlbnQiOlsidmFyIGRlZmVycmVkID0gW107XG5fX3dlYnBhY2tfcmVxdWlyZV9fLk8gPSBmdW5jdGlvbihyZXN1bHQsIGNodW5rSWRzLCBmbiwgcHJpb3JpdHkpIHtcblx0aWYoY2h1bmtJZHMpIHtcblx0XHRwcmlvcml0eSA9IHByaW9yaXR5IHx8IDA7XG5cdFx0Zm9yKHZhciBpID0gZGVmZXJyZWQubGVuZ3RoOyBpID4gMCAmJiBkZWZlcnJlZFtpIC0gMV1bMl0gPiBwcmlvcml0eTsgaS0tKSBkZWZlcnJlZFtpXSA9IGRlZmVycmVkW2kgLSAxXTtcblx0XHRkZWZlcnJlZFtpXSA9IFtjaHVua0lkcywgZm4sIHByaW9yaXR5XTtcblx0XHRyZXR1cm47XG5cdH1cblx0dmFyIG5vdEZ1bGZpbGxlZCA9IEluZmluaXR5O1xuXHRmb3IgKHZhciBpID0gMDsgaSA8IGRlZmVycmVkLmxlbmd0aDsgaSsrKSB7XG5cdFx0dmFyIGNodW5rSWRzID0gZGVmZXJyZWRbaV1bMF07XG5cdFx0dmFyIGZuID0gZGVmZXJyZWRbaV1bMV07XG5cdFx0dmFyIHByaW9yaXR5ID0gZGVmZXJyZWRbaV1bMl07XG5cdFx0dmFyIGZ1bGZpbGxlZCA9IHRydWU7XG5cdFx0Zm9yICh2YXIgaiA9IDA7IGogPCBjaHVua0lkcy5sZW5ndGg7IGorKykge1xuXHRcdFx0aWYgKChwcmlvcml0eSAmIDEgPT09IDAgfHwgbm90RnVsZmlsbGVkID49IHByaW9yaXR5KSAmJiBPYmplY3Qua2V5cyhfX3dlYnBhY2tfcmVxdWlyZV9fLk8pLmV2ZXJ5KGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXy5PW2tleV0oY2h1bmtJZHNbal0pOyB9KSkge1xuXHRcdFx0XHRjaHVua0lkcy5zcGxpY2Uoai0tLCAxKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGZ1bGZpbGxlZCA9IGZhbHNlO1xuXHRcdFx0XHRpZihwcmlvcml0eSA8IG5vdEZ1bGZpbGxlZCkgbm90RnVsZmlsbGVkID0gcHJpb3JpdHk7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdGlmKGZ1bGZpbGxlZCkge1xuXHRcdFx0ZGVmZXJyZWQuc3BsaWNlKGktLSwgMSlcblx0XHRcdHZhciByID0gZm4oKTtcblx0XHRcdGlmIChyICE9PSB1bmRlZmluZWQpIHJlc3VsdCA9IHI7XG5cdFx0fVxuXHR9XG5cdHJldHVybiByZXN1bHQ7XG59OyIsImNsYXNzIEFwaSB7XHJcblxyXG4gICAgX2Jhc2VVUkwgPSBcImh0dHBzOi8vc2ItY2F0cy5oZXJva3VhcHAuY29tL2FwaS8yL1wiO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGF1dGhvcikge1xyXG4gICAgICAgIHRoaXMuYXV0aG9yID0gYXV0aG9yO1xyXG4gICAgfVxyXG5cclxuICAgIGdldENhdHMoKSB7XHJcbiAgICAgICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVUkx9JHt0aGlzLmF1dGhvcn0vc2hvd2ApO1xyXG4gICAgfVxyXG5cclxuICAgIGdldENhdChpZCkge1xyXG4gICAgICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVVJMfSR7dGhpcy5hdXRob3J9L3Nob3cvJHtpZH1gKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRJZHMoKSB7XHJcbiAgICAgICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVUkx9JHt0aGlzLmF1dGhvcn0vaWRzYCk7XHJcbiAgICB9XHJcblxyXG4gICAgYWRkQ2F0KGRhdGEpIHtcclxuICAgICAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVSTH0ke3RoaXMuYXV0aG9yfS9hZGRgLCB7XHJcbiAgICAgICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXHJcbiAgICAgICAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAgICAgICAgIFwiQWNjZXB0XCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxyXG4gICAgICAgICAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCJcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoZGF0YSlcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICB1cGRDYXQoaWQsIGJvZHkpIHtcclxuICAgICAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVSTH0ke3RoaXMuYXV0aG9yfS91cGRhdGUvJHtpZH1gLCB7XHJcbiAgICAgICAgICAgIG1ldGhvZDogXCJQVVRcIixcclxuICAgICAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgICAgICAgXCJBY2NlcHRcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXHJcbiAgICAgICAgICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIlxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShib2R5KVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGRlbENhdChpZCkge1xyXG4gICAgICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVVJMfSR7dGhpcy5hdXRob3J9L2RlbGV0ZS8ke2lkfWAsIHtcclxuICAgICAgICAgICAgbWV0aG9kOiBcIkRFTEVURVwiXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IG5ldyBBcGkoJ2FteScpOyIsImltcG9ydCBhcGkgZnJvbSAnLi9hcGknXHJcblxyXG5jbGFzcyBBcHBNb2RlbCB7XHJcblxyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgdGhpcy5zdGF0ZSA9IHtcclxuICAgICAgICAgICAgY2F0c0RhdGE6IFtdXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIGdldENhdHNEYXRhKCkge1xyXG4gICAgICAgIGNvbnN0IG9sZERhdGEgPSB0aGlzLmdldERhdGFGcm9tTFMoJ2NhdHMnKTtcclxuICAgICAgICBpZiAob2xkRGF0YSkge1xyXG4gICAgICAgICAgICB0aGlzLnN0YXRlLmNhdHNEYXRhID0gb2xkRGF0YTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLmxvYWREYXRhKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGdldENhdEJ5SWQoaWQpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5zdGF0ZS5jYXRzRGF0YS5maW5kKGVsID0+IGVsLmlkID09PSBpZCk7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgbG9hZERhdGEoKSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgYXBpLmdldENhdHMoKTtcclxuICAgICAgICAgICAgaWYgKHJlcy5vaykge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlcy5qc29uKCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLmNhdHNEYXRhID0gZGF0YS5kYXRhO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zYXZlRGF0YUluTFMoJ2NhdHMnLCBkYXRhLmRhdGEpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCfQntGI0LjQsdC60LAg0LfQsNCz0YDRg9C30LrQuCDQtNCw0L3QvdGL0YUnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIHRocm93IGVycm9yO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBnZXREYXRhRnJvbUxTKGtleSkge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShrZXkpO1xyXG4gICAgICAgICAgICByZXR1cm4gZGF0YSA/IEpTT04ucGFyc2UoZGF0YSkgOiBudWxsO1xyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIHRocm93IGVycm9yO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBzYXZlRGF0YUluTFMoa2V5LCBkYXRhKSB7XHJcbiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oa2V5LCBKU09OLnN0cmluZ2lmeShkYXRhKSk7XHJcbiAgICB9XHJcblxyXG4gICAgdmFsaWRhdGVDYXREYXRhKGRhdGEpIHtcclxuICAgICAgICBjb25zdCByZXN1bHQgPSB7XHJcbiAgICAgICAgICAgIHZhbGlkOiB0cnVlLFxyXG4gICAgICAgICAgICBtZXNzYWdlOiAnJ1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gZGF0YSkge1xyXG4gICAgICAgICAgICBpZiAodHlwZW9mIGRhdGFba2V5XSA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgICAgICAgIGlmICghZGF0YVtrZXldLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdC52YWxpZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdC5tZXNzYWdlID0gJ9CX0LDQv9C+0LvQvdC40YLQtSDQstGB0LUg0L/QvtC70Y8hJ1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmIChrZXkgPT09ICdpbWdfbGluaycgJiYgIWRhdGFba2V5XS5pbmNsdWRlcygnaHR0cCcpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnZhbGlkID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0Lm1lc3NhZ2UgPSAn0JLQstC10LTQuNGC0LUg0LrQvtGA0YDQtdC60YLQvdGD0Y4g0YHRgdGL0LvQutGDISdcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBwb3N0Q2F0KGRhdGEpIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBhcGkuYWRkQ2F0KGRhdGEpO1xyXG4gICAgICAgICAgICBpZiAocmVzLm9rKSB7XHJcbiAgICAgICAgICAgICAgICBkYXRhID0gYXdhaXQgcmVzLmpzb24oKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBkYXRhLm1lc3NhZ2U7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIHRocm93IGVycm9yO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBhc3luYyB1cGRhdGVDYXQoaWQsIGRhdGEpIHtcclxuICAgIC8vICAgICBjb25zdCByZXMgPSBhd2FpdCBhcGkudXBkQ2F0KGlkLCBkYXRhKTtcclxuXHJcbiAgICAvLyAgICAgY29uc29sZS5sb2cocmVzKTtcclxuICAgIC8vIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgbmV3IEFwcE1vZGVsKCk7IiwiZXhwb3J0IGNsYXNzIEFkZEZvcm0ge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgdGhpcy5jb2xsZWN0Rm9ybURhdGEgPSB0aGlzLmNvbGxlY3RGb3JtRGF0YS5iaW5kKHRoaXMpO1xyXG4gICAgICAgIHRoaXMuc2V0UHJldmlldyA9IHRoaXMuc2V0UHJldmlldy5iaW5kKHRoaXMpO1xyXG5cclxuICAgICAgICB0aGlzLmZvcm0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdmb3JtJyk7XHJcbiAgICAgICAgdGhpcy5mb3JtLmNsYXNzTmFtZSA9ICdhZGQtZm9ybSc7XHJcbiAgICAgICAgdGhpcy5jb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICB0aGlzLmZvcm1FcnJvciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgIHRoaXMuZm9ybUVycm9yLmNsYXNzTmFtZSA9ICdmb3JtX19lcnJvcic7XHJcbiAgICAgICAgdGhpcy5mb3JtLmlubmVySFRNTCA9IGBcclxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBkaXYgY2xhc3MgPSBcImFkZC1mb3JtX19pbWdcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT1cImJhY2tncm91bmQtaW1hZ2U6dXJsKCdodHRwczovL2Nkbi1pY29ucy1wbmcuZmxhdGljb24uY29tLzUxMi8xMDg5LzEwODk0MjEucG5nJylcIj48L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJudW1iZXJcIiBuYW1lPVwiaWRcIiBtaW49XCIxXCIgcmVxdWlyZWQgcGxhY2Vob2xkZXI9XCJpZFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1cIm51bWJlclwiIG5hbWU9XCJhZ2VcIiBwbGFjZWhvbGRlcj1cItCS0L7Qt9GA0LDRgdGCXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwidGV4dFwiIG5hbWU9XCJuYW1lXCIgcmVxdWlyZWQgcGxhY2Vob2xkZXI9XCLQmNC80Y9cIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJudW1iZXJcIiBuYW1lPVwicmF0ZVwiIHBsYWNlaG9sZGVyPVwi0KDQtdC50YLQuNC90LMgKDAtMTApXCIgbWluPVwiMFwiIG1heD1cIjEwXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDx0ZXh0YXJlYSBuYW1lPVwiZGVzY3JpcHRpb25cIiBwbGFjZWhvbGRlcj1cItCe0L/QuNGB0LDQvdC40LVcIj48L3RleHRhcmVhPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWw+0JvRjtCx0LjQvNGH0LjQuiA8aW5wdXQgdHlwZT1cImNoZWNrYm94XCIgbmFtZT1cImZhdm91cml0ZVwiIHBsYWNlaG9sZGVyPVwiXCI+PC9sYWJlbD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IGlkPVwibGlua1wiIHR5cGU9XCJ0ZXh0XCIgbmFtZT1cImltZ19saW5rXCIgcGxhY2Vob2xkZXI9XCLQodGB0YvQu9C60LAg0L3QsCDRhNC+0YLQvlwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9XCJzdWJtaXRcIj7QlNC+0LHQsNCy0LjRgtGMINC60L7RgtC40LrQsDwvYnV0dG9uPlxyXG4gICAgICAgIGBcclxuICAgICAgICB0aGlzLmNvbnRhaW5lci5pbnNlcnRBZGphY2VudEhUTUwoJ2FmdGVyYmVnaW4nLCBgPGgyIGNsYXNzPVwiYWRkLWZvcm1fX3RpdGxlXCI+0JTQvtCx0LDQstC40YLRjCDQv9C40YLQvtC80YbQsDwvaDI+YCk7XHJcbiAgICAgICAgdGhpcy5jb250YWluZXIuYXBwZW5kKHRoaXMuZm9ybSwgdGhpcy5mb3JtRXJyb3IpO1xyXG4gICAgICAgIHRoaXMuZmllbGRzID0gQXJyYXkuZnJvbShbXHJcbiAgICAgICAgICAgIC4uLnRoaXMuZm9ybS5xdWVyeVNlbGVjdG9yQWxsKCdpbnB1dCcpLFxyXG4gICAgICAgICAgICAuLi50aGlzLmZvcm0ucXVlcnlTZWxlY3RvckFsbCgndGV4dGFyZWEnKVxyXG4gICAgICAgIF0pO1xyXG4gICAgICAgIHRoaXMubGlua0lucHV0ID0gdGhpcy5mb3JtLnF1ZXJ5U2VsZWN0b3IoJyNsaW5rJyk7XHJcbiAgICAgICAgdGhpcy5wcmV2aWV3ID0gdGhpcy5mb3JtLnF1ZXJ5U2VsZWN0b3IoJy5hZGQtZm9ybV9faW1nJyk7XHJcbiAgICB9XHJcblxyXG4gICAgcmVuZGVyKGNvbnRhaW5lcikge1xyXG4gICAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZCh0aGlzLmNvbnRhaW5lcik7XHJcbiAgICAgICAgdGhpcy5saW5rSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgdGhpcy5zZXRQcmV2aWV3KTtcclxuICAgIH1cclxuXHJcbiAgICBzZXRQcmV2aWV3KGUpIHtcclxuICAgICAgICBpZiAoZS50YXJnZXQudmFsdWUgJiYgZS50YXJnZXQudmFsdWUuaW5jbHVkZXMoJ2h0dHAnKSkge1xyXG4gICAgICAgICAgICB0aGlzLnByZXZpZXcuc3R5bGUuYmFja2dyb3VuZEltYWdlID0gYHVybCgke2UudGFyZ2V0LnZhbHVlfSlgO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMucHJldmlldy5zdHlsZS5iYWNrZ3JvdW5kSW1hZ2UgPSBgdXJsKCdodHRwczovL2NkbjAuaWNvbmZpbmRlci5jb20vZGF0YS9pY29ucy9maWxlLWFuZC1kb2N1bWVudC00MS8xMDAvZmlsZV9kb2N1bWVudF9kb2MtMjMtNTEyLnBuZycpYDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgc2hvd0Vycm9yKG1lc3NhZ2UpIHtcclxuICAgICAgICB0aGlzLmZvcm1FcnJvci5pbm5lckhUTUwgPSBgPGRpdj4ke21lc3NhZ2V9PC9kaXY+YDtcclxuICAgICAgICB0aGlzLmZvcm1FcnJvci5zdHlsZS5oZWlnaHQgPSB0aGlzLmZvcm1FcnJvci5zY3JvbGxIZWlnaHQgKyAncHgnO1xyXG4gICAgfVxyXG5cclxuICAgIGhpZGVFcnJvcigpIHtcclxuICAgICAgICB0aGlzLmZvcm1FcnJvci5zdHlsZS5oZWlnaHQgPSAnMHB4JztcclxuICAgIH1cclxuXHJcbiAgICBjb2xsZWN0Rm9ybURhdGEoKSB7XHJcbiAgICAgICAgdGhpcy5oaWRlRXJyb3IoKTtcclxuICAgICAgICBjb25zdCBkYXRhID0ge307XHJcbiAgICAgICAgdGhpcy5maWVsZHMuZm9yRWFjaChmaWVsZCA9PiB7XHJcbiAgICAgICAgICAgIGlmIChmaWVsZC50eXBlID09PSAnY2hlY2tib3gnKSB7XHJcbiAgICAgICAgICAgICAgICBkYXRhW2ZpZWxkLm5hbWVdID0gZmllbGQuY2hlY2tlZCA/IHRydWUgOiBmYWxzZTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGRhdGFbZmllbGQubmFtZV0gPSBmaWVsZC52YWx1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiBkYXRhO1xyXG4gICAgfVxyXG5cclxuICAgIHJlc2V0KCkge1xyXG4gICAgICAgIHRoaXMubGlua0lucHV0LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIHRoaXMuc2V0UHJldmlldyk7XHJcbiAgICAgICAgdGhpcy5wcmV2aWV3LnN0eWxlLmJhY2tncm91bmRJbWFnZSA9IGB1cmwoJ2h0dHBzOi8vY2RuLWljb25zLXBuZy5mbGF0aWNvbi5jb20vNTEyLzEwODkvMTA4OTQyMS5wbmcnKWA7XHJcbiAgICAgICAgdGhpcy5mb3JtLnJlc2V0KCk7XHJcbiAgICAgICAgdGhpcy5oaWRlRXJyb3IoKTtcclxuICAgIH1cclxufSIsImV4cG9ydCBjb25zdCBlbWl0ID0gKG5hbWUsIGRhdGEgPSB7fSwgZWxlbWVudCA9IGRvY3VtZW50LCBzaG91bGRCdWJibGUgPSBmYWxzZSkgPT4ge1xyXG4gICAgbGV0IGV2dDtcclxuICAgIGlmICh0eXBlb2YgQ3VzdG9tRXZlbnQgPT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICBldnQgPSBuZXcgQ3VzdG9tRXZlbnQobmFtZSwge1xyXG4gICAgICAgICAgICBkZXRhaWw6IGRhdGEsXHJcbiAgICAgICAgICAgIGJ1YmJsZXM6IHNob3VsZEJ1YmJsZSxcclxuICAgICAgICB9KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgZXZ0ID0gZG9jdW1lbnQuY3JlYXRlRXZlbnQoJ0N1c3RvbUV2ZW50Jyk7XHJcbiAgICAgICAgZXZ0LmluaXRDdXN0b21FdmVudChuYW1lLCBzaG91bGRCdWJibGUsIGZhbHNlLCBkYXRhKTtcclxuICAgIH1cclxuICAgIGVsZW1lbnQuZGlzcGF0Y2hFdmVudChldnQpO1xyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IGxpc3RlbiA9IChuYW1lLCBoYW5kbGVyLCBlbGVtZW50ID0gZG9jdW1lbnQpID0+IHtcclxuICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihuYW1lLCBoYW5kbGVyKTtcclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCB1bmxpc3RlbiA9IChuYW1lLCBoYW5kbGVyLCBlbGVtZW50ID0gZG9jdW1lbnQpID0+IHtcclxuICAgIGVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihuYW1lLCBoYW5kbGVyKTtcclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCBkZWJvdW5jZSA9IChmbiwgdGltZSA9IDIwMCkgPT4ge1xyXG4gICAgbGV0IHRpbWVyO1xyXG5cclxuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKHRpbWVyKSB7XHJcbiAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aW1lcik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRpbWVyID0gc2V0VGltZW91dCgoKSA9PiBmbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpLCB0aW1lKTtcclxuICAgIH1cclxufTsiLCJpbXBvcnQge1xyXG4gICAgQWRkRm9ybVxyXG59IGZyb20gJy4vQWRkRm9ybSc7XHJcbmltcG9ydCB7XHJcbiAgICBlbWl0LFxyXG4gICAgbGlzdGVuLFxyXG4gICAgdW5saXN0ZW5cclxufSBmcm9tICcuL2hlbHBlcnMnO1xyXG5cclxuY2xhc3MgQXBwVmlldyB7XHJcblxyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgdGhpcy5zaG93Rm9ybUVycm9yID0gdGhpcy5zaG93Rm9ybUVycm9yLmJpbmQodGhpcyk7XHJcbiAgICAgICAgdGhpcy5oaWRlTW9kYWwgPSB0aGlzLmhpZGVNb2RhbC5iaW5kKHRoaXMpO1xyXG4gICAgICAgIHRoaXMuaGlkZU1vZGFsQnlPdmVybGF5ID0gdGhpcy5oaWRlTW9kYWxCeU92ZXJsYXkuYmluZCh0aGlzKTtcclxuICAgICAgICB0aGlzLnNob3dGb3JtID0gdGhpcy5zaG93Rm9ybS5iaW5kKHRoaXMpO1xyXG4gICAgICAgIHRoaXMuZW1pdEZvcm1EYXRhID0gdGhpcy5lbWl0Rm9ybURhdGEuYmluZCh0aGlzKTtcclxuXHJcbiAgICAgICAgdGhpcy5jYXJkc0NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXJkcycpO1xyXG4gICAgICAgIHRoaXMubW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcG9wdXAnKTtcclxuICAgICAgICB0aGlzLm1vZGFsQ29udGVudCA9IHRoaXMubW9kYWwucXVlcnlTZWxlY3RvcignLnBvcHVwX19jb250ZW50Jyk7XHJcbiAgICAgICAgdGhpcy5hZGRCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFkZFwiKTtcclxuICAgICAgICB0aGlzLm1vZGFsQ2xvc2VCdG4gPSB0aGlzLm1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIjcG9wdXAtY2xvc2VcIik7XHJcbiAgICAgICAgdGhpcy5hZGRGb3JtID0gbmV3IEFkZEZvcm0oKTtcclxuICAgIH1cclxuXHJcbiAgICBzaG93Q2FyZHMoY2FyZHNEYXRhKSB7XHJcbiAgICAgICAgbGV0IGNhcmRzID0gJyc7XHJcbiAgICAgICAgY2FyZHNEYXRhLmZvckVhY2goKGVsKSA9PiB7XHJcbiAgICAgICAgICAgIGNhcmRzICs9IGBcclxuICAgICAgICAgICAgICAgIDxkaXYgZGF0YS1pZD1cIiR7ZWwuaWR9XCIgY2xhc3M9XCJjYXJkXCIgc3R5bGU9XCJiYWNrZ3JvdW5kLWltYWdlOiB1cmwoJHtlbC5pbWdfbGlua31cIj5cclxuICAgICAgICAgICAgICAgICAgICAke2VsLmZhdm91cml0ZSA/IGA8aSBjbGFzcz1cImxpa2UgZmEtc29saWQgZmEtaGVhcnRcIj48L2k+YCA6ICcnfVxyXG4gICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiY2FyZF9fbmFtZVwiPiR7ZWwubmFtZX08aSBjbGFzcz1cImZhLXNvbGlkIGZhLW1hZ25pZnlpbmctZ2xhc3MtcGx1c1wiPjwvaT48L3NwYW4+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgYDtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLmNhcmRzQ29udGFpbmVyLmlubmVySFRNTCA9IGNhcmRzO1xyXG4gICAgICAgIHRoaXMuZml0Q2FyZHMoKTtcclxuICAgIH1cclxuXHJcbiAgICBmaXRDYXJkcygpIHtcclxuICAgICAgICBjb25zdCBjYXJkcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5jYXJkJyk7XHJcbiAgICAgICAgY2FyZHMuZm9yRWFjaChjYXJkID0+IHtcclxuICAgICAgICAgICAgY2FyZC5zdHlsZS5oZWlnaHQgPSBjYXJkLm9mZnNldFdpZHRoICogMC42ICsgXCJweFwiO1xyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcblxyXG4gICAgc2hvd1ByZWxvYWRlcigpIHtcclxuICAgICAgICB0aGlzLmNhcmRzQ29udGFpbmVyLmlubmVySFRNTCA9IGA8ZGl2IGNsYXNzPVwicHJlbG9hZGVyXCI+PGkgY2xhc3M9XCJmYS1zb2xpZCBmYS1wYXdcIj48L2Rpdj5gXHJcbiAgICB9XHJcblxyXG4gICAgc2hvd0Vycm9yTWVzc2FnZShtZXNzYWdlKSB7XHJcbiAgICAgICAgdGhpcy5jYXJkc0NvbnRhaW5lci5pbm5lckhUTUwgPSBgXHJcbiAgICAgICAgPGRpdiBjbGFzcz1cImVycm9yXCI+XHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJlcnJvcl9faWNvblwiPjwvZGl2PlxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZXJyb3JfX2NvbnRlbnRcIj5cclxuICAgICAgICAgICAgICAgICAgICA8aDEgY2xhc3M9XCJlcnJvcl9fdGl0bGVcIj7Qo9C/0YEhPGJyLz7Qp9GC0L4t0YLQviDQv9C+0YjQu9C+INC90LUg0YLQsNC6Li4uPC9oMT4gXHJcbiAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3M9XCJlcnJvcl9fdGV4dFwiPiR7bWVzc2FnZX08L3A+IFxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8L2Rpdj4gICBcclxuICAgICAgICBgXHJcbiAgICB9XHJcblxyXG4gICAgc2hvd0RldGFpbHMoZGF0YSkge1xyXG4gICAgICAgIHRoaXMubW9kYWxDb250ZW50LmlubmVySFRNTCA9IGBcclxuICAgICAgICA8ZGl2IGNsYXNzPVwiZGV0YWlsc1wiPlxyXG4gICAgICAgICAgICA8aDIgY2xhc3M9XCJkZXRhaWxzX19uYW1lXCI+JHtkYXRhLm5hbWV9PC9oMj5cclxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRldGFpbHNfX2ltZ1wiPlxyXG4gICAgICAgICAgICAgICAgPGltZyBzcmM9XCIke2RhdGEuaW1nX2xpbmt9XCIgYWx0PVwiY2F0IHBob3RvXCIvPlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRldGFpbHNfX2FnZVwiPtCS0L7Qt9GA0LDRgdGCOiAke2RhdGEuYWdlfTwvZGl2PlxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGV0YWlsc19fcmF0ZVwiPtCg0LXQudGC0LjQvdCzOiAke2RhdGEucmF0ZX08L2Rpdj5cclxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRldGFpbHNfX2ZhdlwiPlxyXG4gICAgICAgICAgICAgICAg0JvRjtCx0LjQvNGH0LjQujogJHtkYXRhLmZhdm91cml0ZSA/IFxyXG4gICAgICAgICAgICAgICAgICAgIGA8aSBjbGFzcz1cImZhLXNvbGlkIGZhLWNoZWNrXCI+PC9pPmAgXHJcbiAgICAgICAgICAgICAgICAgICAgOiBgPGkgY2xhc3M9XCJmYS1zb2xpZCBmYS14bWFya1wiPjwvaT5gfVxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPHAgY2xhc3M9XCJkZXRhaWxzX19hYm91dFwiPiR7ZGF0YS5kZXNjcmlwdGlvbn08L3A+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICBgO1xyXG4gICAgICAgIHRoaXMuX3Nob3dNb2RhbCgpO1xyXG4gICAgfVxyXG5cclxuICAgIGVtaXRGb3JtRGF0YShlKSB7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIGNvbnN0IGRhdGEgPSB0aGlzLmFkZEZvcm0uY29sbGVjdEZvcm1EYXRhKCk7XHJcbiAgICAgICAgZW1pdCgnY2F0OnBvc3QnLCBkYXRhKTtcclxuICAgIH1cclxuXHJcbiAgICBzaG93Rm9ybSgpIHtcclxuICAgICAgICB0aGlzLmFkZEZvcm0ucmVuZGVyKHRoaXMubW9kYWxDb250ZW50KTtcclxuICAgICAgICBsaXN0ZW4oJ3N1Ym1pdCcsIHRoaXMuZW1pdEZvcm1EYXRhLCB0aGlzLmFkZEZvcm0uZm9ybSk7XHJcbiAgICAgICAgdGhpcy5fc2hvd01vZGFsKCk7XHJcbiAgICB9XHJcblxyXG4gICAgc2hvd0Zvcm1FcnJvcihtZXNzYWdlKSB7XHJcbiAgICAgICAgdGhpcy5hZGRGb3JtLnNob3dFcnJvcihtZXNzYWdlKTtcclxuICAgIH1cclxuXHJcbiAgICBoaWRlRm9ybUVycm9yKCkge1xyXG4gICAgICAgIHRoaXMuYWRkRm9ybS5oaWRlRXJyb3IoKTtcclxuICAgIH1cclxuXHJcbiAgICBfc2hvd01vZGFsKCkge1xyXG4gICAgICAgIGlmICghdGhpcy5tb2RhbC5jbGFzc0xpc3QuY29udGFpbnMoJ2FjdGl2ZScpKSB7XHJcbiAgICAgICAgICAgIHRoaXMubW9kYWwucGFyZW50RWxlbWVudC5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcclxuICAgICAgICAgICAgdGhpcy5tb2RhbC5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIGhpZGVNb2RhbCgpIHtcclxuICAgICAgICBpZiAodGhpcy5tb2RhbC5jbGFzc0xpc3QuY29udGFpbnMoJ2FjdGl2ZScpKSB7XHJcbiAgICAgICAgICAgIHRoaXMubW9kYWwucGFyZW50RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcclxuICAgICAgICAgICAgdGhpcy5tb2RhbC5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLm1vZGFsLnF1ZXJ5U2VsZWN0b3IoJy5hZGQtZm9ybScpKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmFkZEZvcm0ucmVzZXQoKTtcclxuICAgICAgICAgICAgICAgIHVubGlzdGVuKCdzdWJtaXQnLCB0aGlzLmVtaXRGb3JtRGF0YSwgdGhpcy5hZGRGb3JtLmZvcm0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMubW9kYWxDb250ZW50LmlubmVySFRNTCA9IGBgO1xyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgaGlkZU1vZGFsQnlPdmVybGF5KGUpIHtcclxuICAgICAgICBpZiAoZS50YXJnZXQgPT09IHRoaXMubW9kYWwucGFyZW50RWxlbWVudCkge1xyXG4gICAgICAgICAgICB0aGlzLmhpZGVNb2RhbCgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgbmV3IEFwcFZpZXcoKTsiLCJpbXBvcnQgYXBwTW9kZWwgZnJvbSAnLi9BcHBNb2RlbCc7XHJcbmltcG9ydCBhcHBWaWV3IGZyb20gJy4vYXBwVmlldyc7XHJcbmltcG9ydCB7XHJcbiAgICBkZWJvdW5jZSxcclxuICAgIGVtaXQsXHJcbiAgICBsaXN0ZW5cclxufSBmcm9tICcuL2hlbHBlcnMnO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQXBwIHtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICB0aGlzLmdldERldGFpbHMgPSB0aGlzLmdldERldGFpbHMuYmluZCh0aGlzKTtcclxuXHJcbiAgICAgICAgdGhpcy5tYWluQ29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FwcE1haW4nKTtcclxuICAgICAgICB0aGlzLm1vZGFsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwb3B1cFwiKTtcclxuICAgICAgICB0aGlzLmFkZEJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYWRkXCIpO1xyXG4gICAgICAgIHRoaXMubW9kYWxDbG9zZUJ0biA9IHRoaXMubW9kYWwucXVlcnlTZWxlY3RvcihcIiNwb3B1cC1jbG9zZVwiKTtcclxuICAgIH1cclxuXHJcbiAgICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgICAgICBsaXN0ZW4oJ2xvYWRpbmc6ZXJyb3InLCAoZSkgPT4gYXBwVmlldy5zaG93RXJyb3JNZXNzYWdlKGUuZGV0YWlsLm1lc3NhZ2UpKTtcclxuICAgICAgICBsaXN0ZW4oJ2NhdDpwb3N0JywgKGUpID0+IHRoaXMuYWRkTmV3Q2F0KGUuZGV0YWlsKSk7XHJcbiAgICAgICAgdGhpcy5tYWluQ29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5nZXREZXRhaWxzKTtcclxuICAgICAgICB0aGlzLmFkZEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGFwcFZpZXcuc2hvd0Zvcm0pO1xyXG4gICAgICAgIHRoaXMubW9kYWxDbG9zZUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGFwcFZpZXcuaGlkZU1vZGFsKTtcclxuICAgICAgICB0aGlzLm1vZGFsLnBhcmVudEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBhcHBWaWV3LmhpZGVNb2RhbEJ5T3ZlcmxheSk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0RGV0YWlscyhlKSB7XHJcbiAgICAgICAgaWYgKGUudGFyZ2V0LmNsb3Nlc3QoJy5jYXJkJykgJiZcclxuICAgICAgICAgICAgZS50YXJnZXQuY2xvc2VzdCgnLmNhcmQnKS5kYXRhc2V0LmlkKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBhcHBNb2RlbC5nZXRDYXRCeUlkKCtlLnRhcmdldC5jbG9zZXN0KCcuY2FyZCcpLmRhdGFzZXQuaWQpO1xyXG4gICAgICAgICAgICBpZiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgYXBwVmlldy5zaG93RGV0YWlscyhkYXRhKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBhZGROZXdDYXQoZGF0YSkge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHtcclxuICAgICAgICAgICAgICAgIHZhbGlkLFxyXG4gICAgICAgICAgICAgICAgbWVzc2FnZVxyXG4gICAgICAgICAgICB9ID0gYXBwTW9kZWwudmFsaWRhdGVDYXREYXRhKGRhdGEpO1xyXG4gICAgICAgICAgICBpZiAodmFsaWQpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGFwcE1vZGVsLnBvc3RDYXQoZGF0YSk7XHJcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0ICE9PSAnb2snKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXBwVmlldy5zaG93Rm9ybUVycm9yKHJlc3VsdCB8fCAn0J7RiNC40LHQutCwINC30LDQs9GA0YPQt9C60Lgg0LTQsNC90L3Ri9GFJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgYXBwVmlldy5oaWRlTW9kYWwoKTtcclxuICAgICAgICAgICAgICAgIGFwcFZpZXcuc2hvd1ByZWxvYWRlcigpO1xyXG5cclxuICAgICAgICAgICAgICAgIGF3YWl0IGFwcE1vZGVsLmxvYWREYXRhKCk7XHJcbiAgICAgICAgICAgICAgICBhcHBWaWV3LnNob3dDYXJkcyhhcHBNb2RlbC5zdGF0ZS5jYXRzRGF0YSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBhcHBWaWV3LnNob3dGb3JtRXJyb3IobWVzc2FnZSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgZW1pdCgnbG9hZGluZzplcnJvcicsIHtcclxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2VcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgaW5pdCgpIHtcclxuICAgICAgICB0aGlzLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICAgICAgYXBwVmlldy5zaG93UHJlbG9hZGVyKCk7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgYXdhaXQgYXBwTW9kZWwuZ2V0Q2F0c0RhdGEoKTtcclxuICAgICAgICAgICAgYXBwVmlldy5zaG93Q2FyZHMoYXBwTW9kZWwuc3RhdGUuY2F0c0RhdGEpO1xyXG4gICAgICAgICAgICBsaXN0ZW4oJ3Jlc2l6ZScsIGRlYm91bmNlKGFwcFZpZXcuZml0Q2FyZHMpLCB3aW5kb3cpO1xyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGVtaXQoJ2xvYWRpbmc6ZXJyb3InLCB7XHJcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiBlcnJvci5tZXNzYWdlXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59IiwiaW1wb3J0IEFwcCBmcm9tICcuL2FwcENvbnRyb2xsZXInO1xyXG5cclxud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCAoKSA9PiB7XHJcbiAgICBjb25zdCBhcHAgPSBuZXcgQXBwKCk7XHJcbiAgICBhcHAuaW5pdCgpO1xyXG59KTsiLCIvLyBUaGUgbW9kdWxlIGNhY2hlXG52YXIgX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fID0ge307XG5cbi8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG5mdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuXHR2YXIgY2FjaGVkTW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXTtcblx0aWYgKGNhY2hlZE1vZHVsZSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0cmV0dXJuIGNhY2hlZE1vZHVsZS5leHBvcnRzO1xuXHR9XG5cdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG5cdHZhciBtb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdID0ge1xuXHRcdC8vIG5vIG1vZHVsZS5pZCBuZWVkZWRcblx0XHQvLyBubyBtb2R1bGUubG9hZGVkIG5lZWRlZFxuXHRcdGV4cG9ydHM6IHt9XG5cdH07XG5cblx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG5cdF9fd2VicGFja19tb2R1bGVzX19bbW9kdWxlSWRdKG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG5cdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG5cdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbn1cblxuLy8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbl9fd2VicGFja19yZXF1aXJlX18ubSA9IF9fd2VicGFja19tb2R1bGVzX187XG5cbiIsIl9fd2VicGFja19yZXF1aXJlX18uZyA9IChmdW5jdGlvbigpIHtcblx0aWYgKHR5cGVvZiBnbG9iYWxUaGlzID09PSAnb2JqZWN0JykgcmV0dXJuIGdsb2JhbFRoaXM7XG5cdHRyeSB7XG5cdFx0cmV0dXJuIHRoaXMgfHwgbmV3IEZ1bmN0aW9uKCdyZXR1cm4gdGhpcycpKCk7XG5cdH0gY2F0Y2ggKGUpIHtcblx0XHRpZiAodHlwZW9mIHdpbmRvdyA9PT0gJ29iamVjdCcpIHJldHVybiB3aW5kb3c7XG5cdH1cbn0pKCk7IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqLCBwcm9wKSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKTsgfSIsIi8vIG5vIGJhc2VVUklcblxuLy8gb2JqZWN0IHRvIHN0b3JlIGxvYWRlZCBhbmQgbG9hZGluZyBjaHVua3Ncbi8vIHVuZGVmaW5lZCA9IGNodW5rIG5vdCBsb2FkZWQsIG51bGwgPSBjaHVuayBwcmVsb2FkZWQvcHJlZmV0Y2hlZFxuLy8gW3Jlc29sdmUsIHJlamVjdCwgUHJvbWlzZV0gPSBjaHVuayBsb2FkaW5nLCAwID0gY2h1bmsgbG9hZGVkXG52YXIgaW5zdGFsbGVkQ2h1bmtzID0ge1xuXHQxNzk6IDBcbn07XG5cbi8vIG5vIGNodW5rIG9uIGRlbWFuZCBsb2FkaW5nXG5cbi8vIG5vIHByZWZldGNoaW5nXG5cbi8vIG5vIHByZWxvYWRlZFxuXG4vLyBubyBITVJcblxuLy8gbm8gSE1SIG1hbmlmZXN0XG5cbl9fd2VicGFja19yZXF1aXJlX18uTy5qID0gZnVuY3Rpb24oY2h1bmtJZCkgeyByZXR1cm4gaW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdID09PSAwOyB9O1xuXG4vLyBpbnN0YWxsIGEgSlNPTlAgY2FsbGJhY2sgZm9yIGNodW5rIGxvYWRpbmdcbnZhciB3ZWJwYWNrSnNvbnBDYWxsYmFjayA9IGZ1bmN0aW9uKHBhcmVudENodW5rTG9hZGluZ0Z1bmN0aW9uLCBkYXRhKSB7XG5cdHZhciBjaHVua0lkcyA9IGRhdGFbMF07XG5cdHZhciBtb3JlTW9kdWxlcyA9IGRhdGFbMV07XG5cdHZhciBydW50aW1lID0gZGF0YVsyXTtcblx0Ly8gYWRkIFwibW9yZU1vZHVsZXNcIiB0byB0aGUgbW9kdWxlcyBvYmplY3QsXG5cdC8vIHRoZW4gZmxhZyBhbGwgXCJjaHVua0lkc1wiIGFzIGxvYWRlZCBhbmQgZmlyZSBjYWxsYmFja1xuXHR2YXIgbW9kdWxlSWQsIGNodW5rSWQsIGkgPSAwO1xuXHRpZihjaHVua0lkcy5zb21lKGZ1bmN0aW9uKGlkKSB7IHJldHVybiBpbnN0YWxsZWRDaHVua3NbaWRdICE9PSAwOyB9KSkge1xuXHRcdGZvcihtb2R1bGVJZCBpbiBtb3JlTW9kdWxlcykge1xuXHRcdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKG1vcmVNb2R1bGVzLCBtb2R1bGVJZCkpIHtcblx0XHRcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tW21vZHVsZUlkXSA9IG1vcmVNb2R1bGVzW21vZHVsZUlkXTtcblx0XHRcdH1cblx0XHR9XG5cdFx0aWYocnVudGltZSkgdmFyIHJlc3VsdCA9IHJ1bnRpbWUoX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cdH1cblx0aWYocGFyZW50Q2h1bmtMb2FkaW5nRnVuY3Rpb24pIHBhcmVudENodW5rTG9hZGluZ0Z1bmN0aW9uKGRhdGEpO1xuXHRmb3IoO2kgPCBjaHVua0lkcy5sZW5ndGg7IGkrKykge1xuXHRcdGNodW5rSWQgPSBjaHVua0lkc1tpXTtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oaW5zdGFsbGVkQ2h1bmtzLCBjaHVua0lkKSAmJiBpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF0pIHtcblx0XHRcdGluc3RhbGxlZENodW5rc1tjaHVua0lkXVswXSgpO1xuXHRcdH1cblx0XHRpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF0gPSAwO1xuXHR9XG5cdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fLk8ocmVzdWx0KTtcbn1cblxudmFyIGNodW5rTG9hZGluZ0dsb2JhbCA9IHNlbGZbXCJ3ZWJwYWNrQ2h1bmtjYXRzXCJdID0gc2VsZltcIndlYnBhY2tDaHVua2NhdHNcIl0gfHwgW107XG5jaHVua0xvYWRpbmdHbG9iYWwuZm9yRWFjaCh3ZWJwYWNrSnNvbnBDYWxsYmFjay5iaW5kKG51bGwsIDApKTtcbmNodW5rTG9hZGluZ0dsb2JhbC5wdXNoID0gd2VicGFja0pzb25wQ2FsbGJhY2suYmluZChudWxsLCBjaHVua0xvYWRpbmdHbG9iYWwucHVzaC5iaW5kKGNodW5rTG9hZGluZ0dsb2JhbCkpOyIsIi8vIHN0YXJ0dXBcbi8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuLy8gVGhpcyBlbnRyeSBtb2R1bGUgZGVwZW5kcyBvbiBvdGhlciBsb2FkZWQgY2h1bmtzIGFuZCBleGVjdXRpb24gbmVlZCB0byBiZSBkZWxheWVkXG5fX3dlYnBhY2tfcmVxdWlyZV9fLk8odW5kZWZpbmVkLCBbMzU2XSwgZnVuY3Rpb24oKSB7IHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKDkzMzcpOyB9KVxudmFyIF9fd2VicGFja19leHBvcnRzX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fLk8odW5kZWZpbmVkLCBbMzU2XSwgZnVuY3Rpb24oKSB7IHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKDQzNTMpOyB9KVxuX193ZWJwYWNrX2V4cG9ydHNfXyA9IF9fd2VicGFja19yZXF1aXJlX18uTyhfX3dlYnBhY2tfZXhwb3J0c19fKTtcbiJdLCJuYW1lcyI6WyJkZWZlcnJlZCIsImF1dGhvciIsInRoaXMiLCJmZXRjaCIsIl9iYXNlVVJMIiwiaWQiLCJkYXRhIiwibWV0aG9kIiwiaGVhZGVycyIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwiQXBwTW9kZWwiLCJzdGF0ZSIsImNhdHNEYXRhIiwib2xkRGF0YSIsImdldERhdGFGcm9tTFMiLCJsb2FkRGF0YSIsImZpbmQiLCJlbCIsImFwaSIsImdldENhdHMiLCJyZXMiLCJvayIsImpzb24iLCJzYXZlRGF0YUluTFMiLCJFcnJvciIsImtleSIsImxvY2FsU3RvcmFnZSIsImdldEl0ZW0iLCJwYXJzZSIsImVycm9yIiwic2V0SXRlbSIsInJlc3VsdCIsInZhbGlkIiwibWVzc2FnZSIsImxlbmd0aCIsImluY2x1ZGVzIiwiYWRkQ2F0IiwiQWRkRm9ybSIsImNvbGxlY3RGb3JtRGF0YSIsImJpbmQiLCJzZXRQcmV2aWV3IiwiZm9ybSIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTmFtZSIsImNvbnRhaW5lciIsImZvcm1FcnJvciIsImlubmVySFRNTCIsImluc2VydEFkamFjZW50SFRNTCIsImFwcGVuZCIsImZpZWxkcyIsIkFycmF5IiwiZnJvbSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJsaW5rSW5wdXQiLCJxdWVyeVNlbGVjdG9yIiwicHJldmlldyIsImFwcGVuZENoaWxkIiwiYWRkRXZlbnRMaXN0ZW5lciIsImUiLCJ0YXJnZXQiLCJ2YWx1ZSIsInN0eWxlIiwiYmFja2dyb3VuZEltYWdlIiwiaGVpZ2h0Iiwic2Nyb2xsSGVpZ2h0IiwiaGlkZUVycm9yIiwiZm9yRWFjaCIsImZpZWxkIiwidHlwZSIsIm5hbWUiLCJjaGVja2VkIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsInJlc2V0IiwiZW1pdCIsImV2dCIsImVsZW1lbnQiLCJzaG91bGRCdWJibGUiLCJDdXN0b21FdmVudCIsImRldGFpbCIsImJ1YmJsZXMiLCJjcmVhdGVFdmVudCIsImluaXRDdXN0b21FdmVudCIsImRpc3BhdGNoRXZlbnQiLCJsaXN0ZW4iLCJoYW5kbGVyIiwiZGVib3VuY2UiLCJmbiIsInRpbWVyIiwidGltZSIsImNsZWFyVGltZW91dCIsInNldFRpbWVvdXQiLCJhcHBseSIsImFyZ3VtZW50cyIsIkFwcFZpZXciLCJzaG93Rm9ybUVycm9yIiwiaGlkZU1vZGFsIiwiaGlkZU1vZGFsQnlPdmVybGF5Iiwic2hvd0Zvcm0iLCJlbWl0Rm9ybURhdGEiLCJjYXJkc0NvbnRhaW5lciIsIm1vZGFsIiwibW9kYWxDb250ZW50IiwiYWRkQnRuIiwiZ2V0RWxlbWVudEJ5SWQiLCJtb2RhbENsb3NlQnRuIiwiYWRkRm9ybSIsImNhcmRzRGF0YSIsImNhcmRzIiwiaW1nX2xpbmsiLCJmYXZvdXJpdGUiLCJmaXRDYXJkcyIsImNhcmQiLCJvZmZzZXRXaWR0aCIsImFnZSIsInJhdGUiLCJkZXNjcmlwdGlvbiIsIl9zaG93TW9kYWwiLCJwcmV2ZW50RGVmYXVsdCIsInJlbmRlciIsInNob3dFcnJvciIsImNsYXNzTGlzdCIsImNvbnRhaW5zIiwicGFyZW50RWxlbWVudCIsImFkZCIsInJlbW92ZSIsInVubGlzdGVuIiwiaSIsIkFwcCIsImdldERldGFpbHMiLCJtYWluQ29udGFpbmVyIiwiYXBwVmlldyIsInNob3dFcnJvck1lc3NhZ2UiLCJhZGROZXdDYXQiLCJjbG9zZXN0IiwiZGF0YXNldCIsImFwcE1vZGVsIiwic2hvd0RldGFpbHMiLCJzaG93UHJlbG9hZGVyIiwic2hvd0NhcmRzIiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJ3aW5kb3ciLCJpbml0IiwiX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiY2FjaGVkTW9kdWxlIiwidW5kZWZpbmVkIiwiZXhwb3J0cyIsIm1vZHVsZSIsIl9fd2VicGFja19tb2R1bGVzX18iLCJtIiwiTyIsImNodW5rSWRzIiwicHJpb3JpdHkiLCJub3RGdWxmaWxsZWQiLCJJbmZpbml0eSIsImZ1bGZpbGxlZCIsImoiLCJPYmplY3QiLCJrZXlzIiwiZXZlcnkiLCJzcGxpY2UiLCJyIiwiZyIsImdsb2JhbFRoaXMiLCJGdW5jdGlvbiIsIm8iLCJvYmoiLCJwcm9wIiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiaW5zdGFsbGVkQ2h1bmtzIiwiY2h1bmtJZCIsIndlYnBhY2tKc29ucENhbGxiYWNrIiwicGFyZW50Q2h1bmtMb2FkaW5nRnVuY3Rpb24iLCJtb3JlTW9kdWxlcyIsInJ1bnRpbWUiLCJzb21lIiwiY2h1bmtMb2FkaW5nR2xvYmFsIiwic2VsZiIsInB1c2giLCJfX3dlYnBhY2tfZXhwb3J0c19fIl0sInNvdXJjZVJvb3QiOiIifQ==