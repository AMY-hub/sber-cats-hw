/*! For license information please see main.js.LICENSE.txt */
!function(){"use strict";var t,e={9337:function(t,e,r){function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function o(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,i(n.key),n)}}function i(t){var e=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,"string");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===n(e)?e:String(e)}r(4812),r(6649),r(6078),r(2526),r(1817),r(1539),r(9653),r(9070),r(8674),r(2165),r(6992),r(8783),r(3948),r(2443),r(9341),r(3706),r(2703),r(8011),r(489),r(9554),r(4747),r(8309),r(8304),r(7042),r(9826),r(6699),r(2023),r(2222);var a=new(function(){function t(e){var r,n,o;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,o="https://sb-cats.herokuapp.com/api/2/",(n=i(n="_baseURL"))in r?Object.defineProperty(r,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[n]=o,this.author=e}var e,r;return e=t,(r=[{key:"getCats",value:function(){return fetch("".concat(this._baseURL).concat(this.author,"/show"))}},{key:"getCat",value:function(t){return fetch("".concat(this._baseURL).concat(this.author,"/show/").concat(t))}},{key:"getIds",value:function(){return fetch("".concat(this._baseURL).concat(this.author,"/ids"))}},{key:"addCat",value:function(t){return fetch("".concat(this._baseURL).concat(this.author,"/add"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)})}},{key:"updCat",value:function(t,e){return fetch("".concat(this._baseURL).concat(this.author,"/update/").concat(t),{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)})}},{key:"delCat",value:function(t){return fetch("".concat(this._baseURL).concat(this.author,"/delete/").concat(t),{method:"DELETE"})}}])&&o(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}())("amy");function c(t){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c(t)}function u(){u=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function f(t,e,r,o){var i=e&&e.prototype instanceof p?e:p,a=Object.create(i.prototype),c=new j(o||[]);return n(a,"_invoke",{value:x(t,r,c)}),a}function h(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=f;var d={};function p(){}function v(){}function y(){}var m={};l(m,i,(function(){return this}));var g=Object.getPrototypeOf,b=g&&g(g(O([])));b&&b!==e&&r.call(b,i)&&(m=b);var w=y.prototype=p.prototype=Object.create(m);function E(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function k(t,e){function o(n,i,a,u){var s=h(t[n],t,i);if("throw"!==s.type){var l=s.arg,f=l.value;return f&&"object"==c(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){o("next",t,a,u)}),(function(t){o("throw",t,a,u)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return o("throw",t,a,u)}))}u(s.arg)}var i;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return i=i?i.then(n,n):n()}})}function x(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=L(a,r);if(c){if(c===d)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=h(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===d)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function L(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,L(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),d;var o=h(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,d;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,d):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,d)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function _(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function O(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:C}}function C(){return{value:void 0,done:!0}}return v.prototype=y,n(w,"constructor",{value:y,configurable:!0}),n(y,"constructor",{value:v,configurable:!0}),v.displayName=l(y,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===v||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,l(t,s,"GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},E(k.prototype),l(k.prototype,a,(function(){return this})),t.AsyncIterator=k,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new k(f(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},E(w),l(w,s,"Generator"),l(w,i,(function(){return this})),l(w,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=O,j.prototype={constructor:j,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),_(r),d}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;_(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:O(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),d}},t}function s(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function l(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){s(i,n,o,a,c,"next",t)}function c(t){s(i,n,o,a,c,"throw",t)}a(void 0)}))}}function f(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==c(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==c(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===c(o)?o:String(o)),n)}var o}var h=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.state={catsData:[]}}var e,r,n,o,i;return e=t,r=[{key:"getCatsData",value:(i=l(u().mark((function t(){var e;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e=this.getDataFromLS("cats"))){t.next=5;break}this.state.catsData=e,t.next=7;break;case 5:return t.next=7,this.loadData();case 7:case"end":return t.stop()}}),t,this)}))),function(){return i.apply(this,arguments)})},{key:"getCatById",value:function(t){return this.state.catsData.find((function(e){return e.id===t}))}},{key:"loadData",value:(o=l(u().mark((function t(){var e,r;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,a.getCats();case 3:if(!(e=t.sent).ok){t.next=12;break}return t.next=7,e.json();case 7:r=t.sent,this.state.catsData=r.data,this.saveDataInLS("cats",r.data),t.next=13;break;case 12:throw new Error("Ошибка загрузки данных");case 13:t.next=18;break;case 15:throw t.prev=15,t.t0=t.catch(0),t.t0;case 18:case"end":return t.stop()}}),t,this,[[0,15]])}))),function(){return o.apply(this,arguments)})},{key:"getDataFromLS",value:function(t){try{var e=localStorage.getItem(t);return e?JSON.parse(e):null}catch(t){throw t}}},{key:"saveDataInLS",value:function(t,e){localStorage.setItem(t,JSON.stringify(e))}},{key:"validateCatData",value:function(t){var e={valid:!0,message:""};for(var r in t)if("string"==typeof t[r]){if(!t[r].length){e.valid=!1,e.message="Заполните все поля!";break}if("img_link"===r&&!t[r].includes("http")){e.valid=!1,e.message="Введите корректную ссылку!";break}}return e}},{key:"postCat",value:(n=l(u().mark((function t(e){var r;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,a.addCat(e);case 3:if(!(r=t.sent).ok){t.next=11;break}return t.next=7,r.json();case 7:return e=t.sent,t.abrupt("return",e.message);case 11:return t.abrupt("return",!1);case 12:t.next=17;break;case 14:throw t.prev=14,t.t0=t.catch(0),t.t0;case 17:case"end":return t.stop()}}),t,null,[[0,14]])}))),function(t){return n.apply(this,arguments)})}],r&&f(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}(),d=new h,p=(r(1038),r(9753),r(4916),r(2564),function(t){var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:document,o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];"function"==typeof CustomEvent?e=new CustomEvent(t,{detail:r,bubbles:o}):(e=document.createEvent("CustomEvent")).initCustomEvent(t,o,!1,r),n.dispatchEvent(e)}),v=function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:document;r.addEventListener(t,e)},y=function(t){var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200;return function(){var n=arguments,o=this;e&&clearTimeout(e),e=setTimeout((function(){return t.apply(o,n)}),r)}};function m(t){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},m(t)}function g(t){return function(t){if(Array.isArray(t))return b(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return b(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?b(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function w(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==m(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==m(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===m(o)?o:String(o)),n)}var o}var E=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.collectFormData=this.collectFormData.bind(this),this.form=document.createElement("form"),this.form.className="form",this.container=document.createElement("div"),this.formError=document.createElement("div"),this.formError.className="form__error",this.form.innerHTML='\n                        <div class="form__img"></div>\n                        <input type="number" name="id" min="1" required placeholder="id">\n                        <input type="number" name="age" placeholder="Возраст">\n                        <input type="text" name="name" required placeholder="Имя">\n                        <input type="number" name="rate" placeholder="Рейтинг (0-10)" min="0" max="10">\n                        <textarea name="description" placeholder="Описание"></textarea>\n                        <label>Любимчик <input type="checkbox" name="favourite" placeholder=""></label>\n                        <input id="link" type="text" name="img_link" placeholder="Ссылка на фото">\n                        <button type="submit">Добавить котика</button>\n        ',this.container.insertAdjacentHTML("afterbegin",'<h2 class="form__title">Добавить питомца</h2>'),this.container.append(this.form,this.formError),this.fields=Array.from([].concat(g(this.form.querySelectorAll("input")),g(this.form.querySelectorAll("textarea")))),this.linkInput=this.form.querySelector("#link"),this.preview=this.form.querySelector(".form__img")}var e,r;return e=t,(r=[{key:"render",value:function(t){var e=this;t.appendChild(this.container),this.linkInput.addEventListener("change",(function(t){t.target.value&&t.target.value.includes("http")?e.preview.style.backgroundImage="url(".concat(t.target.value,")"):e.preview.style.backgroundImage="url('https://cdn0.iconfinder.com/data/icons/file-and-document-41/100/file_document_doc-23-512.png')"})),this.form.addEventListener("submit",(function(t){t.preventDefault();var r=e.collectFormData();p("cat:post",r)}))}},{key:"showError",value:function(t){this.formError.innerHTML="<div>".concat(t,"</div>"),this.formError.style.height=this.formError.scrollHeight+"px"}},{key:"hideError",value:function(){this.formError.style.height="0px"}},{key:"collectFormData",value:function(){this.hideError();var t={};return this.fields.forEach((function(e){"checkbox"===e.type?t[e.name]=!!e.checked:t[e.name]=e.value})),t}},{key:"reset",value:function(){this.root.reset()}}])&&w(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function k(t){return k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},k(t)}function x(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==k(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==k(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===k(o)?o:String(o)),n)}var o}var L=new(function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.showFormError=this.showFormError.bind(this),this.hideModal=this.hideModal.bind(this),this.hideModalByOverlay=this.hideModalByOverlay.bind(this),this.showForm=this.showForm.bind(this),this.cardsContainer=document.querySelector(".cards"),this.modal=document.querySelector("#popup"),this.modalContent=this.modal.querySelector(".popup__content"),this.addBtn=document.getElementById("add"),this.modalCloseBtn=this.modal.querySelector("#popup-close"),this.addForm=new E}var e,r;return e=t,(r=[{key:"showFormError",value:function(t){this.addForm.showError(t)}},{key:"hideFormError",value:function(){this.addForm.hideError()}},{key:"showCards",value:function(t){var e="";t.forEach((function(t){e+='\n                <div data-id="'.concat(t.id,'" class="card" style="background-image: url(').concat(t.img_link,'">\n                    ').concat(t.favourite?'<i class="like fa-solid fa-heart"></i>':"",'\n                    <span class="card__name">').concat(t.name,'<i class="fa-solid fa-magnifying-glass-plus"></i></span>\n                </div>\n            ')})),this.cardsContainer.innerHTML=e,this.fitCards()}},{key:"fitCards",value:function(){document.querySelectorAll(".card").forEach((function(t){t.style.height=.6*t.offsetWidth+"px"}))}},{key:"showPreloader",value:function(){this.cardsContainer.innerHTML='<div class="preloader"><i class="fa-solid fa-paw"></div>'}},{key:"showErrorMessage",value:function(t){this.cardsContainer.innerHTML='\n        <div class="error">\n            <div class="error__icon"></div>\n            <div class="error__content">\n                    <h1 class="error__title">Упс!<br/>Что-то пошло не так...</h1> \n                    <p class="error__text">'.concat(t,"</p> \n            </div>\n        </div>   \n        ")}},{key:"showForm",value:function(){this.addForm.render(this.modalContent),this._showModal()}},{key:"_showModal",value:function(){this.modal.classList.contains("active")||(this.modal.parentElement.classList.add("active"),this.modal.classList.add("active"))}},{key:"hideModal",value:function(){this.modal.classList.contains("active")&&(this.modal.parentElement.classList.remove("active"),this.modal.classList.remove("active"),this.modalContent.innerHTML="")}},{key:"hideModalByOverlay",value:function(t){t.target===this.modal.parentElement&&this.hideModal()}},{key:"showDetails",value:function(t){this.modalContent.innerHTML='\n            <div class="details">\n                <h2 class="details__name">'.concat(t.name,'</h2>\n                <div class="details__img">\n                    <img src="').concat(t.img_link,'" alt="cat photo"/>\n                </div>\n                <div class="details__age">Возраст: ').concat(t.age,'</div>\n                <div class="details__rate">Рейтинг: ').concat(t.rate,'</div>\n                <div class="details__fav">\n                    Любимчик: ').concat(t.favourite?'<i class="fa-solid fa-check"></i>':'<i class="fa-solid fa-xmark"></i>','\n                </div>\n                <p class="details__about">').concat(t.description,"</p>\n            </div>\n        "),this._showModal()}}])&&x(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}());function S(t){return S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},S(t)}function _(){_=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function s(t,e,r,o){var i=e&&e.prototype instanceof h?e:h,a=Object.create(i.prototype),c=new j(o||[]);return n(a,"_invoke",{value:E(t,r,c)}),a}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=s;var f={};function h(){}function d(){}function p(){}var v={};u(v,i,(function(){return this}));var y=Object.getPrototypeOf,m=y&&y(y(O([])));m&&m!==e&&r.call(m,i)&&(v=m);var g=p.prototype=h.prototype=Object.create(v);function b(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function w(t,e){function o(n,i,a,c){var u=l(t[n],t,i);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==S(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){o("next",t,a,c)}),(function(t){o("throw",t,a,c)})):e.resolve(f).then((function(t){s.value=t,a(s)}),(function(t){return o("throw",t,a,c)}))}c(u.arg)}var i;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return i=i?i.then(n,n):n()}})}function E(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=k(a,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=l(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function k(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,k(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=l(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,f;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function x(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function L(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(x,this),this.reset(!0)}function O(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:C}}function C(){return{value:void 0,done:!0}}return d.prototype=p,n(g,"constructor",{value:p,configurable:!0}),n(p,"constructor",{value:d,configurable:!0}),d.displayName=u(p,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,u(t,c,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},b(w.prototype),u(w.prototype,a,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new w(s(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},b(g),u(g,c,"Generator"),u(g,i,(function(){return this})),u(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=O,j.prototype={constructor:j,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(L),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),L(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;L(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:O(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}function j(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function O(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){j(i,n,o,a,c,"next",t)}function c(t){j(i,n,o,a,c,"throw",t)}a(void 0)}))}}function C(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==S(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==S(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===S(o)?o:String(o)),n)}var o}var P=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.getDetails=this.getDetails.bind(this),this.mainContainer=document.getElementById("appMain"),this.modal=document.getElementById("popup"),this.addBtn=document.getElementById("add"),this.modalCloseBtn=this.modal.querySelector("#popup-close")}var e,r,n,o;return e=t,r=[{key:"setEventListeners",value:function(){var t=this;v("loading:error",(function(t){return L.showErrorMessage(t.detail.message)})),v("cat:post",(function(e){return t.addNewCat(e.detail)})),this.mainContainer.addEventListener("click",this.getDetails),this.addBtn.addEventListener("click",L.showForm),this.modalCloseBtn.addEventListener("click",L.hideModal),this.modal.parentElement.addEventListener("click",L.hideModalByOverlay)}},{key:"getDetails",value:function(t){if(t.target.closest(".card")&&t.target.closest(".card").dataset.id){var e=d.getCatById(+t.target.closest(".card").dataset.id);e&&L.showDetails(e)}}},{key:"addNewCat",value:(o=O(_().mark((function t(e){var r,n,o,i;return _().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,r=d.validateCatData(e),n=r.valid,o=r.message,!n){t.next=16;break}return t.next=5,d.postCat(e);case 5:if("ok"===(i=t.sent)){t.next=9;break}return L.showFormError(i||"Ошибка загрузки данных"),t.abrupt("return");case 9:return L.hideModal(),L.showPreloader(),t.next=13,d.loadData();case 13:L.showCards(d.state.catsData),t.next=17;break;case 16:L.showFormError(o);case 17:t.next=22;break;case 19:t.prev=19,t.t0=t.catch(0),p("loading:error",{message:t.t0.message});case 22:case"end":return t.stop()}}),t,null,[[0,19]])}))),function(t){return o.apply(this,arguments)})},{key:"init",value:(n=O(_().mark((function t(){return _().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.setEventListeners(),L.showPreloader(),t.prev=2,t.next=5,d.getCatsData();case 5:L.showCards(d.state.catsData),v("resize",y(L.fitCards),window),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),p("loading:error",{message:t.t0.message});case 12:case"end":return t.stop()}}),t,this,[[2,9]])}))),function(){return n.apply(this,arguments)})}],r&&C(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();window.addEventListener("DOMContentLoaded",(function(){(new P).init()}))},4353:function(){}},r={};function n(t){var o=r[t];if(void 0!==o)return o.exports;var i=r[t]={exports:{}};return e[t](i,i.exports,n),i.exports}n.m=e,t=[],n.O=function(e,r,o,i){if(!r){var a=1/0;for(l=0;l<t.length;l++){r=t[l][0],o=t[l][1],i=t[l][2];for(var c=!0,u=0;u<r.length;u++)(!1&i||a>=i)&&Object.keys(n.O).every((function(t){return n.O[t](r[u])}))?r.splice(u--,1):(c=!1,i<a&&(a=i));if(c){t.splice(l--,1);var s=o();void 0!==s&&(e=s)}}return e}i=i||0;for(var l=t.length;l>0&&t[l-1][2]>i;l--)t[l]=t[l-1];t[l]=[r,o,i]},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},function(){var t={179:0};n.O.j=function(e){return 0===t[e]};var e=function(e,r){var o,i,a=r[0],c=r[1],u=r[2],s=0;if(a.some((function(e){return 0!==t[e]}))){for(o in c)n.o(c,o)&&(n.m[o]=c[o]);if(u)var l=u(n)}for(e&&e(r);s<a.length;s++)i=a[s],n.o(t,i)&&t[i]&&t[i][0](),t[i]=0;return n.O(l)},r=self.webpackChunkcats=self.webpackChunkcats||[];r.forEach(e.bind(null,0)),r.push=e.bind(null,r.push.bind(r))}(),n.O(void 0,[356],(function(){return n(9337)}));var o=n.O(void 0,[356],(function(){return n(4353)}));o=n.O(o)}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFRbUYsRUFBcUI3RyxLQUFLLEtBQU0sSUFDM0RrSCxFQUFtQkUsS0FBT1AsRUFBcUI3RyxLQUFLLEtBQU1rSCxFQUFtQkUsS0FBS3BILEtBQUtrSCxPQy9DdkZwQyxFQUFvQlEsT0FBRUwsRUFBVyxDQUFDLE1BQU0sV0FBYSxPQUFPSCxFQUFvQixLQUFPLElBQ3ZGLElBQUl1QyxFQUFzQnZDLEVBQW9CUSxPQUFFTCxFQUFXLENBQUMsTUFBTSxXQUFhLE9BQU9ILEVBQW9CLEtBQU8sSUFDakh1QyxFQUFzQnZDLEVBQW9CUSxFQUFFK0IiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jYXRzL3dlYnBhY2svcnVudGltZS9jaHVuayBsb2FkZWQiLCJ3ZWJwYWNrOi8vY2F0cy8uL3NyYy9zY3JpcHRzL2FwaS5qcyIsIndlYnBhY2s6Ly9jYXRzLy4vc3JjL3NjcmlwdHMvQXBwTW9kZWwuanMiLCJ3ZWJwYWNrOi8vY2F0cy8uL3NyYy9zY3JpcHRzL2hlbHBlcnMuanMiLCJ3ZWJwYWNrOi8vY2F0cy8uL3NyYy9zY3JpcHRzL0FkZEZvcm0uanMiLCJ3ZWJwYWNrOi8vY2F0cy8uL3NyYy9zY3JpcHRzL2FwcFZpZXcuanMiLCJ3ZWJwYWNrOi8vY2F0cy8uL3NyYy9zY3JpcHRzL2FwcENvbnRyb2xsZXIuanMiLCJ3ZWJwYWNrOi8vY2F0cy8uL3NyYy9zY3JpcHRzL2luZGV4LmpzIiwid2VicGFjazovL2NhdHMvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vY2F0cy93ZWJwYWNrL3J1bnRpbWUvZ2xvYmFsIiwid2VicGFjazovL2NhdHMvd2VicGFjay9ydW50aW1lL2hhc093blByb3BlcnR5IHNob3J0aGFuZCIsIndlYnBhY2s6Ly9jYXRzL3dlYnBhY2svcnVudGltZS9qc29ucCBjaHVuayBsb2FkaW5nIiwid2VicGFjazovL2NhdHMvd2VicGFjay9zdGFydHVwIl0sInNvdXJjZXNDb250ZW50IjpbInZhciBkZWZlcnJlZCA9IFtdO1xuX193ZWJwYWNrX3JlcXVpcmVfXy5PID0gZnVuY3Rpb24ocmVzdWx0LCBjaHVua0lkcywgZm4sIHByaW9yaXR5KSB7XG5cdGlmKGNodW5rSWRzKSB7XG5cdFx0cHJpb3JpdHkgPSBwcmlvcml0eSB8fCAwO1xuXHRcdGZvcih2YXIgaSA9IGRlZmVycmVkLmxlbmd0aDsgaSA+IDAgJiYgZGVmZXJyZWRbaSAtIDFdWzJdID4gcHJpb3JpdHk7IGktLSkgZGVmZXJyZWRbaV0gPSBkZWZlcnJlZFtpIC0gMV07XG5cdFx0ZGVmZXJyZWRbaV0gPSBbY2h1bmtJZHMsIGZuLCBwcmlvcml0eV07XG5cdFx0cmV0dXJuO1xuXHR9XG5cdHZhciBub3RGdWxmaWxsZWQgPSBJbmZpbml0eTtcblx0Zm9yICh2YXIgaSA9IDA7IGkgPCBkZWZlcnJlZC5sZW5ndGg7IGkrKykge1xuXHRcdHZhciBjaHVua0lkcyA9IGRlZmVycmVkW2ldWzBdO1xuXHRcdHZhciBmbiA9IGRlZmVycmVkW2ldWzFdO1xuXHRcdHZhciBwcmlvcml0eSA9IGRlZmVycmVkW2ldWzJdO1xuXHRcdHZhciBmdWxmaWxsZWQgPSB0cnVlO1xuXHRcdGZvciAodmFyIGogPSAwOyBqIDwgY2h1bmtJZHMubGVuZ3RoOyBqKyspIHtcblx0XHRcdGlmICgocHJpb3JpdHkgJiAxID09PSAwIHx8IG5vdEZ1bGZpbGxlZCA+PSBwcmlvcml0eSkgJiYgT2JqZWN0LmtleXMoX193ZWJwYWNrX3JlcXVpcmVfXy5PKS5ldmVyeShmdW5jdGlvbihrZXkpIHsgcmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18uT1trZXldKGNodW5rSWRzW2pdKTsgfSkpIHtcblx0XHRcdFx0Y2h1bmtJZHMuc3BsaWNlKGotLSwgMSk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRmdWxmaWxsZWQgPSBmYWxzZTtcblx0XHRcdFx0aWYocHJpb3JpdHkgPCBub3RGdWxmaWxsZWQpIG5vdEZ1bGZpbGxlZCA9IHByaW9yaXR5O1xuXHRcdFx0fVxuXHRcdH1cblx0XHRpZihmdWxmaWxsZWQpIHtcblx0XHRcdGRlZmVycmVkLnNwbGljZShpLS0sIDEpXG5cdFx0XHR2YXIgciA9IGZuKCk7XG5cdFx0XHRpZiAociAhPT0gdW5kZWZpbmVkKSByZXN1bHQgPSByO1xuXHRcdH1cblx0fVxuXHRyZXR1cm4gcmVzdWx0O1xufTsiLCJjbGFzcyBBcGkge1xyXG5cclxuICAgIF9iYXNlVVJMID0gXCJodHRwczovL3NiLWNhdHMuaGVyb2t1YXBwLmNvbS9hcGkvMi9cIjtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihhdXRob3IpIHtcclxuICAgICAgICB0aGlzLmF1dGhvciA9IGF1dGhvcjtcclxuICAgIH1cclxuXHJcbiAgICBnZXRDYXRzKCkge1xyXG4gICAgICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVVJMfSR7dGhpcy5hdXRob3J9L3Nob3dgKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRDYXQoaWQpIHtcclxuICAgICAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVSTH0ke3RoaXMuYXV0aG9yfS9zaG93LyR7aWR9YCk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0SWRzKCkge1xyXG4gICAgICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVVJMfSR7dGhpcy5hdXRob3J9L2lkc2ApO1xyXG4gICAgfVxyXG5cclxuICAgIGFkZENhdChkYXRhKSB7XHJcbiAgICAgICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVUkx9JHt0aGlzLmF1dGhvcn0vYWRkYCwge1xyXG4gICAgICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxyXG4gICAgICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAgICAgICBcIkFjY2VwdFwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcclxuICAgICAgICAgICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGRhdGEpXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgdXBkQ2F0KGlkLCBib2R5KSB7XHJcbiAgICAgICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVUkx9JHt0aGlzLmF1dGhvcn0vdXBkYXRlLyR7aWR9YCwge1xyXG4gICAgICAgICAgICBtZXRob2Q6IFwiUFVUXCIsXHJcbiAgICAgICAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAgICAgICAgIFwiQWNjZXB0XCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxyXG4gICAgICAgICAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCJcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoYm9keSlcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBkZWxDYXQoaWQpIHtcclxuICAgICAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVSTH0ke3RoaXMuYXV0aG9yfS9kZWxldGUvJHtpZH1gLCB7XHJcbiAgICAgICAgICAgIG1ldGhvZDogXCJERUxFVEVcIlxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBuZXcgQXBpKCdhbXknKTsiLCJpbXBvcnQgYXBpIGZyb20gJy4vYXBpJ1xyXG5cclxuY2xhc3MgQXBwTW9kZWwge1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHRoaXMuc3RhdGUgPSB7XHJcbiAgICAgICAgICAgIGNhdHNEYXRhOiBbXVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBnZXRDYXRzRGF0YSgpIHtcclxuICAgICAgICBjb25zdCBvbGREYXRhID0gdGhpcy5nZXREYXRhRnJvbUxTKCdjYXRzJyk7XHJcbiAgICAgICAgaWYgKG9sZERhdGEpIHtcclxuICAgICAgICAgICAgdGhpcy5zdGF0ZS5jYXRzRGF0YSA9IG9sZERhdGE7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5sb2FkRGF0YSgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBnZXRDYXRCeUlkKGlkKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RhdGUuY2F0c0RhdGEuZmluZChlbCA9PiBlbC5pZCA9PT0gaWQpO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIGxvYWREYXRhKCkge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGFwaS5nZXRDYXRzKCk7XHJcbiAgICAgICAgICAgIGlmIChyZXMub2spIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXMuanNvbigpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS5jYXRzRGF0YSA9IGRhdGEuZGF0YTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2F2ZURhdGFJbkxTKCdjYXRzJywgZGF0YS5kYXRhKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcign0J7RiNC40LHQutCwINC30LDQs9GA0YPQt9C60Lgg0LTQsNC90L3Ri9GFJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICB0aHJvdyBlcnJvcjtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0RGF0YUZyb21MUyhrZXkpIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBjb25zdCBkYXRhID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oa2V5KTtcclxuICAgICAgICAgICAgcmV0dXJuIGRhdGEgPyBKU09OLnBhcnNlKGRhdGEpIDogbnVsbDtcclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICB0aHJvdyBlcnJvcjtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgc2F2ZURhdGFJbkxTKGtleSwgZGF0YSkge1xyXG4gICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKGtleSwgSlNPTi5zdHJpbmdpZnkoZGF0YSkpO1xyXG4gICAgfVxyXG5cclxuICAgIHZhbGlkYXRlQ2F0RGF0YShkYXRhKSB7XHJcbiAgICAgICAgY29uc3QgcmVzdWx0ID0ge1xyXG4gICAgICAgICAgICB2YWxpZDogdHJ1ZSxcclxuICAgICAgICAgICAgbWVzc2FnZTogJydcclxuICAgICAgICB9O1xyXG4gICAgICAgIGZvciAoY29uc3Qga2V5IGluIGRhdGEpIHtcclxuICAgICAgICAgICAgaWYgKHR5cGVvZiBkYXRhW2tleV0gPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWRhdGFba2V5XS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXN1bHQudmFsaWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICByZXN1bHQubWVzc2FnZSA9ICfQl9Cw0L/QvtC70L3QuNGC0LUg0LLRgdC1INC/0L7Qu9GPISdcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoa2V5ID09PSAnaW1nX2xpbmsnICYmICFkYXRhW2tleV0uaW5jbHVkZXMoJ2h0dHAnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdC52YWxpZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdC5tZXNzYWdlID0gJ9CS0LLQtdC00LjRgtC1INC60L7RgNGA0LXQutGC0L3Rg9GOINGB0YHRi9C70LrRgyEnXHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgcG9zdENhdChkYXRhKSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgYXBpLmFkZENhdChkYXRhKTtcclxuICAgICAgICAgICAgaWYgKHJlcy5vaykge1xyXG4gICAgICAgICAgICAgICAgZGF0YSA9IGF3YWl0IHJlcy5qc29uKCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZGF0YS5tZXNzYWdlO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgdGhyb3cgZXJyb3I7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIGFzeW5jIHVwZGF0ZUNhdChpZCwgZGF0YSkge1xyXG4gICAgLy8gICAgIGNvbnN0IHJlcyA9IGF3YWl0IGFwaS51cGRDYXQoaWQsIGRhdGEpO1xyXG5cclxuICAgIC8vICAgICBjb25zb2xlLmxvZyhyZXMpO1xyXG4gICAgLy8gfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBuZXcgQXBwTW9kZWwoKTsiLCJleHBvcnQgY29uc3QgZW1pdCA9IChuYW1lLCBkYXRhID0ge30sIGVsZW1lbnQgPSBkb2N1bWVudCwgc2hvdWxkQnViYmxlID0gZmFsc2UpID0+IHtcclxuICAgIGxldCBldnQ7XHJcbiAgICBpZiAodHlwZW9mIEN1c3RvbUV2ZW50ID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgZXZ0ID0gbmV3IEN1c3RvbUV2ZW50KG5hbWUsIHtcclxuICAgICAgICAgICAgZGV0YWlsOiBkYXRhLFxyXG4gICAgICAgICAgICBidWJibGVzOiBzaG91bGRCdWJibGUsXHJcbiAgICAgICAgfSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGV2dCA9IGRvY3VtZW50LmNyZWF0ZUV2ZW50KCdDdXN0b21FdmVudCcpO1xyXG4gICAgICAgIGV2dC5pbml0Q3VzdG9tRXZlbnQobmFtZSwgc2hvdWxkQnViYmxlLCBmYWxzZSwgZGF0YSk7XHJcbiAgICB9XHJcbiAgICBlbGVtZW50LmRpc3BhdGNoRXZlbnQoZXZ0KTtcclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCBsaXN0ZW4gPSAobmFtZSwgaGFuZGxlciwgZWxlbWVudCA9IGRvY3VtZW50KSA9PiB7XHJcbiAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIobmFtZSwgaGFuZGxlcik7XHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgdW5saXN0ZW4gPSAobmFtZSwgaGFuZGxlciwgZWxlbWVudCA9IGRvY3VtZW50KSA9PiB7XHJcbiAgICBlbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIobmFtZSwgaGFuZGxlcik7XHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgZGVib3VuY2UgPSAoZm4sIHRpbWUgPSAyMDApID0+IHtcclxuICAgIGxldCB0aW1lcjtcclxuXHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICh0aW1lcikge1xyXG4gICAgICAgICAgICBjbGVhclRpbWVvdXQodGltZXIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aW1lciA9IHNldFRpbWVvdXQoKCkgPT4gZm4uYXBwbHkodGhpcywgYXJndW1lbnRzKSwgdGltZSk7XHJcbiAgICB9XHJcbn07IiwiaW1wb3J0IHtcclxuICAgIGVtaXRcclxufSBmcm9tICcuL2hlbHBlcnMnO1xyXG5cclxuZXhwb3J0IGNsYXNzIEFkZEZvcm0ge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgdGhpcy5jb2xsZWN0Rm9ybURhdGEgPSB0aGlzLmNvbGxlY3RGb3JtRGF0YS5iaW5kKHRoaXMpO1xyXG5cclxuICAgICAgICB0aGlzLmZvcm0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdmb3JtJyk7XHJcbiAgICAgICAgdGhpcy5mb3JtLmNsYXNzTmFtZSA9ICdmb3JtJztcclxuICAgICAgICB0aGlzLmNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgIHRoaXMuZm9ybUVycm9yID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgdGhpcy5mb3JtRXJyb3IuY2xhc3NOYW1lID0gJ2Zvcm1fX2Vycm9yJztcclxuICAgICAgICB0aGlzLmZvcm0uaW5uZXJIVE1MID0gYFxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZm9ybV9faW1nXCI+PC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwibnVtYmVyXCIgbmFtZT1cImlkXCIgbWluPVwiMVwiIHJlcXVpcmVkIHBsYWNlaG9sZGVyPVwiaWRcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJudW1iZXJcIiBuYW1lPVwiYWdlXCIgcGxhY2Vob2xkZXI9XCLQktC+0LfRgNCw0YHRglwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1cInRleHRcIiBuYW1lPVwibmFtZVwiIHJlcXVpcmVkIHBsYWNlaG9sZGVyPVwi0JjQvNGPXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwibnVtYmVyXCIgbmFtZT1cInJhdGVcIiBwbGFjZWhvbGRlcj1cItCg0LXQudGC0LjQvdCzICgwLTEwKVwiIG1pbj1cIjBcIiBtYXg9XCIxMFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8dGV4dGFyZWEgbmFtZT1cImRlc2NyaXB0aW9uXCIgcGxhY2Vob2xkZXI9XCLQntC/0LjRgdCw0L3QuNC1XCI+PC90ZXh0YXJlYT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsPtCb0Y7QsdC40LzRh9C40LogPGlucHV0IHR5cGU9XCJjaGVja2JveFwiIG5hbWU9XCJmYXZvdXJpdGVcIiBwbGFjZWhvbGRlcj1cIlwiPjwvbGFiZWw+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCBpZD1cImxpbmtcIiB0eXBlPVwidGV4dFwiIG5hbWU9XCJpbWdfbGlua1wiIHBsYWNlaG9sZGVyPVwi0KHRgdGL0LvQutCwINC90LAg0YTQvtGC0L5cIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPVwic3VibWl0XCI+0JTQvtCx0LDQstC40YLRjCDQutC+0YLQuNC60LA8L2J1dHRvbj5cclxuICAgICAgICBgXHJcbiAgICAgICAgdGhpcy5jb250YWluZXIuaW5zZXJ0QWRqYWNlbnRIVE1MKCdhZnRlcmJlZ2luJywgYDxoMiBjbGFzcz1cImZvcm1fX3RpdGxlXCI+0JTQvtCx0LDQstC40YLRjCDQv9C40YLQvtC80YbQsDwvaDI+YCk7XHJcbiAgICAgICAgdGhpcy5jb250YWluZXIuYXBwZW5kKHRoaXMuZm9ybSwgdGhpcy5mb3JtRXJyb3IpO1xyXG4gICAgICAgIHRoaXMuZmllbGRzID0gQXJyYXkuZnJvbShbXHJcbiAgICAgICAgICAgIC4uLnRoaXMuZm9ybS5xdWVyeVNlbGVjdG9yQWxsKCdpbnB1dCcpLFxyXG4gICAgICAgICAgICAuLi50aGlzLmZvcm0ucXVlcnlTZWxlY3RvckFsbCgndGV4dGFyZWEnKVxyXG4gICAgICAgIF0pO1xyXG4gICAgICAgIHRoaXMubGlua0lucHV0ID0gdGhpcy5mb3JtLnF1ZXJ5U2VsZWN0b3IoJyNsaW5rJyk7XHJcbiAgICAgICAgdGhpcy5wcmV2aWV3ID0gdGhpcy5mb3JtLnF1ZXJ5U2VsZWN0b3IoJy5mb3JtX19pbWcnKTtcclxuICAgIH1cclxuXHJcbiAgICByZW5kZXIoY29udGFpbmVyKSB7XHJcbiAgICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKHRoaXMuY29udGFpbmVyKTtcclxuICAgICAgICB0aGlzLmxpbmtJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCAoZSkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoZS50YXJnZXQudmFsdWUgJiYgZS50YXJnZXQudmFsdWUuaW5jbHVkZXMoJ2h0dHAnKSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5wcmV2aWV3LnN0eWxlLmJhY2tncm91bmRJbWFnZSA9IGB1cmwoJHtlLnRhcmdldC52YWx1ZX0pYDtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucHJldmlldy5zdHlsZS5iYWNrZ3JvdW5kSW1hZ2UgPSBgdXJsKCdodHRwczovL2NkbjAuaWNvbmZpbmRlci5jb20vZGF0YS9pY29ucy9maWxlLWFuZC1kb2N1bWVudC00MS8xMDAvZmlsZV9kb2N1bWVudF9kb2MtMjMtNTEyLnBuZycpYDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLmZvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgKGUpID0+IHtcclxuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICBjb25zdCBkYXRhID0gdGhpcy5jb2xsZWN0Rm9ybURhdGEoKTtcclxuICAgICAgICAgICAgZW1pdCgnY2F0OnBvc3QnLCBkYXRhKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBzaG93RXJyb3IobWVzc2FnZSkge1xyXG4gICAgICAgIHRoaXMuZm9ybUVycm9yLmlubmVySFRNTCA9IGA8ZGl2PiR7bWVzc2FnZX08L2Rpdj5gO1xyXG4gICAgICAgIHRoaXMuZm9ybUVycm9yLnN0eWxlLmhlaWdodCA9IHRoaXMuZm9ybUVycm9yLnNjcm9sbEhlaWdodCArICdweCc7XHJcbiAgICB9XHJcblxyXG4gICAgaGlkZUVycm9yKCkge1xyXG4gICAgICAgIHRoaXMuZm9ybUVycm9yLnN0eWxlLmhlaWdodCA9ICcwcHgnO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbGxlY3RGb3JtRGF0YSgpIHtcclxuICAgICAgICB0aGlzLmhpZGVFcnJvcigpO1xyXG4gICAgICAgIGNvbnN0IGRhdGEgPSB7fTtcclxuICAgICAgICB0aGlzLmZpZWxkcy5mb3JFYWNoKGZpZWxkID0+IHtcclxuICAgICAgICAgICAgaWYgKGZpZWxkLnR5cGUgPT09ICdjaGVja2JveCcpIHtcclxuICAgICAgICAgICAgICAgIGRhdGFbZmllbGQubmFtZV0gPSBmaWVsZC5jaGVja2VkID8gdHJ1ZSA6IGZhbHNlO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgZGF0YVtmaWVsZC5uYW1lXSA9IGZpZWxkLnZhbHVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIGRhdGE7XHJcbiAgICB9XHJcblxyXG4gICAgcmVzZXQoKSB7XHJcbiAgICAgICAgdGhpcy5yb290LnJlc2V0KCk7XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQge1xyXG4gICAgQWRkRm9ybVxyXG59IGZyb20gJy4vQWRkRm9ybSc7XHJcblxyXG5jbGFzcyBBcHBWaWV3IHtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICB0aGlzLnNob3dGb3JtRXJyb3IgPSB0aGlzLnNob3dGb3JtRXJyb3IuYmluZCh0aGlzKTtcclxuICAgICAgICB0aGlzLmhpZGVNb2RhbCA9IHRoaXMuaGlkZU1vZGFsLmJpbmQodGhpcyk7XHJcbiAgICAgICAgdGhpcy5oaWRlTW9kYWxCeU92ZXJsYXkgPSB0aGlzLmhpZGVNb2RhbEJ5T3ZlcmxheS5iaW5kKHRoaXMpO1xyXG4gICAgICAgIHRoaXMuc2hvd0Zvcm0gPSB0aGlzLnNob3dGb3JtLmJpbmQodGhpcyk7XHJcblxyXG4gICAgICAgIHRoaXMuY2FyZHNDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY2FyZHMnKTtcclxuICAgICAgICB0aGlzLm1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3BvcHVwJyk7XHJcbiAgICAgICAgdGhpcy5tb2RhbENvbnRlbnQgPSB0aGlzLm1vZGFsLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fY29udGVudCcpO1xyXG4gICAgICAgIHRoaXMuYWRkQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJhZGRcIik7XHJcbiAgICAgICAgdGhpcy5tb2RhbENsb3NlQnRuID0gdGhpcy5tb2RhbC5xdWVyeVNlbGVjdG9yKFwiI3BvcHVwLWNsb3NlXCIpO1xyXG4gICAgICAgIHRoaXMuYWRkRm9ybSA9IG5ldyBBZGRGb3JtKCk7XHJcbiAgICB9XHJcblxyXG4gICAgc2hvd0Zvcm1FcnJvcihtZXNzYWdlKSB7XHJcbiAgICAgICAgdGhpcy5hZGRGb3JtLnNob3dFcnJvcihtZXNzYWdlKTtcclxuICAgIH1cclxuXHJcbiAgICBoaWRlRm9ybUVycm9yKCkge1xyXG4gICAgICAgIHRoaXMuYWRkRm9ybS5oaWRlRXJyb3IoKTtcclxuICAgIH1cclxuXHJcbiAgICBzaG93Q2FyZHMoY2FyZHNEYXRhKSB7XHJcbiAgICAgICAgbGV0IGNhcmRzID0gJyc7XHJcbiAgICAgICAgY2FyZHNEYXRhLmZvckVhY2goKGVsKSA9PiB7XHJcbiAgICAgICAgICAgIGNhcmRzICs9IGBcclxuICAgICAgICAgICAgICAgIDxkaXYgZGF0YS1pZD1cIiR7ZWwuaWR9XCIgY2xhc3M9XCJjYXJkXCIgc3R5bGU9XCJiYWNrZ3JvdW5kLWltYWdlOiB1cmwoJHtlbC5pbWdfbGlua31cIj5cclxuICAgICAgICAgICAgICAgICAgICAke2VsLmZhdm91cml0ZSA/IGA8aSBjbGFzcz1cImxpa2UgZmEtc29saWQgZmEtaGVhcnRcIj48L2k+YCA6ICcnfVxyXG4gICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiY2FyZF9fbmFtZVwiPiR7ZWwubmFtZX08aSBjbGFzcz1cImZhLXNvbGlkIGZhLW1hZ25pZnlpbmctZ2xhc3MtcGx1c1wiPjwvaT48L3NwYW4+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgYDtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLmNhcmRzQ29udGFpbmVyLmlubmVySFRNTCA9IGNhcmRzO1xyXG4gICAgICAgIHRoaXMuZml0Q2FyZHMoKTtcclxuICAgIH1cclxuXHJcbiAgICBmaXRDYXJkcygpIHtcclxuICAgICAgICBjb25zdCBjYXJkcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5jYXJkJyk7XHJcbiAgICAgICAgY2FyZHMuZm9yRWFjaChjYXJkID0+IHtcclxuICAgICAgICAgICAgY2FyZC5zdHlsZS5oZWlnaHQgPSBjYXJkLm9mZnNldFdpZHRoICogMC42ICsgXCJweFwiO1xyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcblxyXG4gICAgc2hvd1ByZWxvYWRlcigpIHtcclxuICAgICAgICB0aGlzLmNhcmRzQ29udGFpbmVyLmlubmVySFRNTCA9IGA8ZGl2IGNsYXNzPVwicHJlbG9hZGVyXCI+PGkgY2xhc3M9XCJmYS1zb2xpZCBmYS1wYXdcIj48L2Rpdj5gXHJcbiAgICB9XHJcblxyXG4gICAgc2hvd0Vycm9yTWVzc2FnZShtZXNzYWdlKSB7XHJcbiAgICAgICAgdGhpcy5jYXJkc0NvbnRhaW5lci5pbm5lckhUTUwgPSBgXHJcbiAgICAgICAgPGRpdiBjbGFzcz1cImVycm9yXCI+XHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJlcnJvcl9faWNvblwiPjwvZGl2PlxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZXJyb3JfX2NvbnRlbnRcIj5cclxuICAgICAgICAgICAgICAgICAgICA8aDEgY2xhc3M9XCJlcnJvcl9fdGl0bGVcIj7Qo9C/0YEhPGJyLz7Qp9GC0L4t0YLQviDQv9C+0YjQu9C+INC90LUg0YLQsNC6Li4uPC9oMT4gXHJcbiAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3M9XCJlcnJvcl9fdGV4dFwiPiR7bWVzc2FnZX08L3A+IFxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8L2Rpdj4gICBcclxuICAgICAgICBgXHJcbiAgICB9XHJcblxyXG4gICAgc2hvd0Zvcm0oKSB7XHJcbiAgICAgICAgdGhpcy5hZGRGb3JtLnJlbmRlcih0aGlzLm1vZGFsQ29udGVudCk7XHJcbiAgICAgICAgdGhpcy5fc2hvd01vZGFsKCk7XHJcbiAgICB9XHJcblxyXG4gICAgX3Nob3dNb2RhbCgpIHtcclxuICAgICAgICBpZiAoIXRoaXMubW9kYWwuY2xhc3NMaXN0LmNvbnRhaW5zKCdhY3RpdmUnKSkge1xyXG4gICAgICAgICAgICB0aGlzLm1vZGFsLnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XHJcbiAgICAgICAgICAgIHRoaXMubW9kYWwuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICBoaWRlTW9kYWwoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMubW9kYWwuY2xhc3NMaXN0LmNvbnRhaW5zKCdhY3RpdmUnKSkge1xyXG4gICAgICAgICAgICB0aGlzLm1vZGFsLnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7XHJcbiAgICAgICAgICAgIHRoaXMubW9kYWwuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7XHJcbiAgICAgICAgICAgIHRoaXMubW9kYWxDb250ZW50LmlubmVySFRNTCA9IGBgO1xyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgaGlkZU1vZGFsQnlPdmVybGF5KGUpIHtcclxuICAgICAgICBpZiAoZS50YXJnZXQgPT09IHRoaXMubW9kYWwucGFyZW50RWxlbWVudCkge1xyXG4gICAgICAgICAgICB0aGlzLmhpZGVNb2RhbCgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBzaG93RGV0YWlscyhkYXRhKSB7XHJcbiAgICAgICAgdGhpcy5tb2RhbENvbnRlbnQuaW5uZXJIVE1MID0gYFxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGV0YWlsc1wiPlxyXG4gICAgICAgICAgICAgICAgPGgyIGNsYXNzPVwiZGV0YWlsc19fbmFtZVwiPiR7ZGF0YS5uYW1lfTwvaDI+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGV0YWlsc19faW1nXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPGltZyBzcmM9XCIke2RhdGEuaW1nX2xpbmt9XCIgYWx0PVwiY2F0IHBob3RvXCIvPlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGV0YWlsc19fYWdlXCI+0JLQvtC30YDQsNGB0YI6ICR7ZGF0YS5hZ2V9PC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGV0YWlsc19fcmF0ZVwiPtCg0LXQudGC0LjQvdCzOiAke2RhdGEucmF0ZX08L2Rpdj5cclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkZXRhaWxzX19mYXZcIj5cclxuICAgICAgICAgICAgICAgICAgICDQm9GO0LHQuNC80YfQuNC6OiAke2RhdGEuZmF2b3VyaXRlID8gXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGA8aSBjbGFzcz1cImZhLXNvbGlkIGZhLWNoZWNrXCI+PC9pPmAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDogYDxpIGNsYXNzPVwiZmEtc29saWQgZmEteG1hcmtcIj48L2k+YH1cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgPHAgY2xhc3M9XCJkZXRhaWxzX19hYm91dFwiPiR7ZGF0YS5kZXNjcmlwdGlvbn08L3A+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgIGA7XHJcbiAgICAgICAgdGhpcy5fc2hvd01vZGFsKCk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IG5ldyBBcHBWaWV3KCk7IiwiaW1wb3J0IGFwcE1vZGVsIGZyb20gJy4vQXBwTW9kZWwnO1xyXG5pbXBvcnQgYXBwVmlldyBmcm9tICcuL2FwcFZpZXcnO1xyXG5pbXBvcnQge1xyXG4gICAgZGVib3VuY2UsXHJcbiAgICBlbWl0LFxyXG4gICAgbGlzdGVuXHJcbn0gZnJvbSAnLi9oZWxwZXJzJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEFwcCB7XHJcblxyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgdGhpcy5nZXREZXRhaWxzID0gdGhpcy5nZXREZXRhaWxzLmJpbmQodGhpcyk7XHJcblxyXG4gICAgICAgIHRoaXMubWFpbkNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhcHBNYWluJyk7XHJcbiAgICAgICAgdGhpcy5tb2RhbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicG9wdXBcIik7XHJcbiAgICAgICAgdGhpcy5hZGRCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFkZFwiKTtcclxuICAgICAgICB0aGlzLm1vZGFsQ2xvc2VCdG4gPSB0aGlzLm1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIjcG9wdXAtY2xvc2VcIik7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICAgICAgbGlzdGVuKCdsb2FkaW5nOmVycm9yJywgKGUpID0+IGFwcFZpZXcuc2hvd0Vycm9yTWVzc2FnZShlLmRldGFpbC5tZXNzYWdlKSk7XHJcbiAgICAgICAgbGlzdGVuKCdjYXQ6cG9zdCcsIChlKSA9PiB0aGlzLmFkZE5ld0NhdChlLmRldGFpbCkpO1xyXG4gICAgICAgIHRoaXMubWFpbkNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuZ2V0RGV0YWlscyk7XHJcbiAgICAgICAgdGhpcy5hZGRCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBhcHBWaWV3LnNob3dGb3JtKTtcclxuICAgICAgICB0aGlzLm1vZGFsQ2xvc2VCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBhcHBWaWV3LmhpZGVNb2RhbCk7XHJcbiAgICAgICAgdGhpcy5tb2RhbC5wYXJlbnRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYXBwVmlldy5oaWRlTW9kYWxCeU92ZXJsYXkpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldERldGFpbHMoZSkge1xyXG4gICAgICAgIGlmIChlLnRhcmdldC5jbG9zZXN0KCcuY2FyZCcpICYmXHJcbiAgICAgICAgICAgIGUudGFyZ2V0LmNsb3Nlc3QoJy5jYXJkJykuZGF0YXNldC5pZCkge1xyXG4gICAgICAgICAgICBjb25zdCBkYXRhID0gYXBwTW9kZWwuZ2V0Q2F0QnlJZCgrZS50YXJnZXQuY2xvc2VzdCgnLmNhcmQnKS5kYXRhc2V0LmlkKTtcclxuICAgICAgICAgICAgaWYgKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgIGFwcFZpZXcuc2hvd0RldGFpbHMoZGF0YSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgYWRkTmV3Q2F0KGRhdGEpIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBjb25zdCB7XHJcbiAgICAgICAgICAgICAgICB2YWxpZCxcclxuICAgICAgICAgICAgICAgIG1lc3NhZ2VcclxuICAgICAgICAgICAgfSA9IGFwcE1vZGVsLnZhbGlkYXRlQ2F0RGF0YShkYXRhKTtcclxuICAgICAgICAgICAgaWYgKHZhbGlkKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBhcHBNb2RlbC5wb3N0Q2F0KGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdCAhPT0gJ29rJykge1xyXG4gICAgICAgICAgICAgICAgICAgIGFwcFZpZXcuc2hvd0Zvcm1FcnJvcihyZXN1bHQgfHwgJ9Ce0YjQuNCx0LrQsCDQt9Cw0LPRgNGD0LfQutC4INC00LDQvdC90YvRhScpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGFwcFZpZXcuaGlkZU1vZGFsKCk7XHJcbiAgICAgICAgICAgICAgICBhcHBWaWV3LnNob3dQcmVsb2FkZXIoKTtcclxuXHJcbiAgICAgICAgICAgICAgICBhd2FpdCBhcHBNb2RlbC5sb2FkRGF0YSgpO1xyXG4gICAgICAgICAgICAgICAgYXBwVmlldy5zaG93Q2FyZHMoYXBwTW9kZWwuc3RhdGUuY2F0c0RhdGEpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgYXBwVmlldy5zaG93Rm9ybUVycm9yKG1lc3NhZ2UpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGVtaXQoJ2xvYWRpbmc6ZXJyb3InLCB7XHJcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiBlcnJvci5tZXNzYWdlXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIGluaXQoKSB7XHJcbiAgICAgICAgdGhpcy5zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgICAgIGFwcFZpZXcuc2hvd1ByZWxvYWRlcigpO1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGF3YWl0IGFwcE1vZGVsLmdldENhdHNEYXRhKCk7XHJcbiAgICAgICAgICAgIGFwcFZpZXcuc2hvd0NhcmRzKGFwcE1vZGVsLnN0YXRlLmNhdHNEYXRhKTtcclxuICAgICAgICAgICAgbGlzdGVuKCdyZXNpemUnLCBkZWJvdW5jZShhcHBWaWV3LmZpdENhcmRzKSwgd2luZG93KTtcclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICBlbWl0KCdsb2FkaW5nOmVycm9yJywge1xyXG4gICAgICAgICAgICAgICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufSIsImltcG9ydCBBcHAgZnJvbSAnLi9hcHBDb250cm9sbGVyJztcclxuXHJcbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgKCkgPT4ge1xyXG4gICAgY29uc3QgYXBwID0gbmV3IEFwcCgpO1xyXG4gICAgYXBwLmluaXQoKTtcclxufSk7IiwiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0dmFyIGNhY2hlZE1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF07XG5cdGlmIChjYWNoZWRNb2R1bGUgIT09IHVuZGVmaW5lZCkge1xuXHRcdHJldHVybiBjYWNoZWRNb2R1bGUuZXhwb3J0cztcblx0fVxuXHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcblx0XHQvLyBubyBtb2R1bGUuaWQgbmVlZGVkXG5cdFx0Ly8gbm8gbW9kdWxlLmxvYWRlZCBuZWVkZWRcblx0XHRleHBvcnRzOiB7fVxuXHR9O1xuXG5cdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHRfX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXShtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuXHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbi8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG5fX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBfX3dlYnBhY2tfbW9kdWxlc19fO1xuXG4iLCJfX3dlYnBhY2tfcmVxdWlyZV9fLmcgPSAoZnVuY3Rpb24oKSB7XG5cdGlmICh0eXBlb2YgZ2xvYmFsVGhpcyA9PT0gJ29iamVjdCcpIHJldHVybiBnbG9iYWxUaGlzO1xuXHR0cnkge1xuXHRcdHJldHVybiB0aGlzIHx8IG5ldyBGdW5jdGlvbigncmV0dXJuIHRoaXMnKSgpO1xuXHR9IGNhdGNoIChlKSB7XG5cdFx0aWYgKHR5cGVvZiB3aW5kb3cgPT09ICdvYmplY3QnKSByZXR1cm4gd2luZG93O1xuXHR9XG59KSgpOyIsIl9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iaiwgcHJvcCkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCk7IH0iLCIvLyBubyBiYXNlVVJJXG5cbi8vIG9iamVjdCB0byBzdG9yZSBsb2FkZWQgYW5kIGxvYWRpbmcgY2h1bmtzXG4vLyB1bmRlZmluZWQgPSBjaHVuayBub3QgbG9hZGVkLCBudWxsID0gY2h1bmsgcHJlbG9hZGVkL3ByZWZldGNoZWRcbi8vIFtyZXNvbHZlLCByZWplY3QsIFByb21pc2VdID0gY2h1bmsgbG9hZGluZywgMCA9IGNodW5rIGxvYWRlZFxudmFyIGluc3RhbGxlZENodW5rcyA9IHtcblx0MTc5OiAwXG59O1xuXG4vLyBubyBjaHVuayBvbiBkZW1hbmQgbG9hZGluZ1xuXG4vLyBubyBwcmVmZXRjaGluZ1xuXG4vLyBubyBwcmVsb2FkZWRcblxuLy8gbm8gSE1SXG5cbi8vIG5vIEhNUiBtYW5pZmVzdFxuXG5fX3dlYnBhY2tfcmVxdWlyZV9fLk8uaiA9IGZ1bmN0aW9uKGNodW5rSWQpIHsgcmV0dXJuIGluc3RhbGxlZENodW5rc1tjaHVua0lkXSA9PT0gMDsgfTtcblxuLy8gaW5zdGFsbCBhIEpTT05QIGNhbGxiYWNrIGZvciBjaHVuayBsb2FkaW5nXG52YXIgd2VicGFja0pzb25wQ2FsbGJhY2sgPSBmdW5jdGlvbihwYXJlbnRDaHVua0xvYWRpbmdGdW5jdGlvbiwgZGF0YSkge1xuXHR2YXIgY2h1bmtJZHMgPSBkYXRhWzBdO1xuXHR2YXIgbW9yZU1vZHVsZXMgPSBkYXRhWzFdO1xuXHR2YXIgcnVudGltZSA9IGRhdGFbMl07XG5cdC8vIGFkZCBcIm1vcmVNb2R1bGVzXCIgdG8gdGhlIG1vZHVsZXMgb2JqZWN0LFxuXHQvLyB0aGVuIGZsYWcgYWxsIFwiY2h1bmtJZHNcIiBhcyBsb2FkZWQgYW5kIGZpcmUgY2FsbGJhY2tcblx0dmFyIG1vZHVsZUlkLCBjaHVua0lkLCBpID0gMDtcblx0aWYoY2h1bmtJZHMuc29tZShmdW5jdGlvbihpZCkgeyByZXR1cm4gaW5zdGFsbGVkQ2h1bmtzW2lkXSAhPT0gMDsgfSkpIHtcblx0XHRmb3IobW9kdWxlSWQgaW4gbW9yZU1vZHVsZXMpIHtcblx0XHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhtb3JlTW9kdWxlcywgbW9kdWxlSWQpKSB7XG5cdFx0XHRcdF9fd2VicGFja19yZXF1aXJlX18ubVttb2R1bGVJZF0gPSBtb3JlTW9kdWxlc1ttb2R1bGVJZF07XG5cdFx0XHR9XG5cdFx0fVxuXHRcdGlmKHJ1bnRpbWUpIHZhciByZXN1bHQgPSBydW50aW1lKF9fd2VicGFja19yZXF1aXJlX18pO1xuXHR9XG5cdGlmKHBhcmVudENodW5rTG9hZGluZ0Z1bmN0aW9uKSBwYXJlbnRDaHVua0xvYWRpbmdGdW5jdGlvbihkYXRhKTtcblx0Zm9yKDtpIDwgY2h1bmtJZHMubGVuZ3RoOyBpKyspIHtcblx0XHRjaHVua0lkID0gY2h1bmtJZHNbaV07XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGluc3RhbGxlZENodW5rcywgY2h1bmtJZCkgJiYgaW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdKSB7XG5cdFx0XHRpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF1bMF0oKTtcblx0XHR9XG5cdFx0aW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdID0gMDtcblx0fVxuXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXy5PKHJlc3VsdCk7XG59XG5cbnZhciBjaHVua0xvYWRpbmdHbG9iYWwgPSBzZWxmW1wid2VicGFja0NodW5rY2F0c1wiXSA9IHNlbGZbXCJ3ZWJwYWNrQ2h1bmtjYXRzXCJdIHx8IFtdO1xuY2h1bmtMb2FkaW5nR2xvYmFsLmZvckVhY2god2VicGFja0pzb25wQ2FsbGJhY2suYmluZChudWxsLCAwKSk7XG5jaHVua0xvYWRpbmdHbG9iYWwucHVzaCA9IHdlYnBhY2tKc29ucENhbGxiYWNrLmJpbmQobnVsbCwgY2h1bmtMb2FkaW5nR2xvYmFsLnB1c2guYmluZChjaHVua0xvYWRpbmdHbG9iYWwpKTsiLCIvLyBzdGFydHVwXG4vLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbi8vIFRoaXMgZW50cnkgbW9kdWxlIGRlcGVuZHMgb24gb3RoZXIgbG9hZGVkIGNodW5rcyBhbmQgZXhlY3V0aW9uIG5lZWQgdG8gYmUgZGVsYXllZFxuX193ZWJwYWNrX3JlcXVpcmVfXy5PKHVuZGVmaW5lZCwgWzM1Nl0sIGZ1bmN0aW9uKCkgeyByZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyg5MzM3KTsgfSlcbnZhciBfX3dlYnBhY2tfZXhwb3J0c19fID0gX193ZWJwYWNrX3JlcXVpcmVfXy5PKHVuZGVmaW5lZCwgWzM1Nl0sIGZ1bmN0aW9uKCkgeyByZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyg0MzUzKTsgfSlcbl9fd2VicGFja19leHBvcnRzX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fLk8oX193ZWJwYWNrX2V4cG9ydHNfXyk7XG4iXSwibmFtZXMiOlsiZGVmZXJyZWQiLCJhdXRob3IiLCJ0aGlzIiwiZmV0Y2giLCJfYmFzZVVSTCIsImlkIiwiZGF0YSIsIm1ldGhvZCIsImhlYWRlcnMiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsIkFwcE1vZGVsIiwic3RhdGUiLCJjYXRzRGF0YSIsIm9sZERhdGEiLCJnZXREYXRhRnJvbUxTIiwibG9hZERhdGEiLCJmaW5kIiwiZWwiLCJhcGkiLCJnZXRDYXRzIiwicmVzIiwib2siLCJqc29uIiwic2F2ZURhdGFJbkxTIiwiRXJyb3IiLCJrZXkiLCJsb2NhbFN0b3JhZ2UiLCJnZXRJdGVtIiwicGFyc2UiLCJlcnJvciIsInNldEl0ZW0iLCJyZXN1bHQiLCJ2YWxpZCIsIm1lc3NhZ2UiLCJsZW5ndGgiLCJpbmNsdWRlcyIsImFkZENhdCIsImVtaXQiLCJuYW1lIiwiZXZ0IiwiZWxlbWVudCIsImRvY3VtZW50Iiwic2hvdWxkQnViYmxlIiwiQ3VzdG9tRXZlbnQiLCJkZXRhaWwiLCJidWJibGVzIiwiY3JlYXRlRXZlbnQiLCJpbml0Q3VzdG9tRXZlbnQiLCJkaXNwYXRjaEV2ZW50IiwibGlzdGVuIiwiaGFuZGxlciIsImFkZEV2ZW50TGlzdGVuZXIiLCJkZWJvdW5jZSIsImZuIiwidGltZXIiLCJ0aW1lIiwiY2xlYXJUaW1lb3V0Iiwic2V0VGltZW91dCIsImFwcGx5IiwiYXJndW1lbnRzIiwiQWRkRm9ybSIsImNvbGxlY3RGb3JtRGF0YSIsImJpbmQiLCJmb3JtIiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTmFtZSIsImNvbnRhaW5lciIsImZvcm1FcnJvciIsImlubmVySFRNTCIsImluc2VydEFkamFjZW50SFRNTCIsImFwcGVuZCIsImZpZWxkcyIsIkFycmF5IiwiZnJvbSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJsaW5rSW5wdXQiLCJxdWVyeVNlbGVjdG9yIiwicHJldmlldyIsImFwcGVuZENoaWxkIiwiZSIsInRhcmdldCIsInZhbHVlIiwic3R5bGUiLCJiYWNrZ3JvdW5kSW1hZ2UiLCJwcmV2ZW50RGVmYXVsdCIsImhlaWdodCIsInNjcm9sbEhlaWdodCIsImhpZGVFcnJvciIsImZvckVhY2giLCJmaWVsZCIsInR5cGUiLCJjaGVja2VkIiwicm9vdCIsInJlc2V0Iiwic2hvd0Zvcm1FcnJvciIsImhpZGVNb2RhbCIsImhpZGVNb2RhbEJ5T3ZlcmxheSIsInNob3dGb3JtIiwiY2FyZHNDb250YWluZXIiLCJtb2RhbCIsIm1vZGFsQ29udGVudCIsImFkZEJ0biIsImdldEVsZW1lbnRCeUlkIiwibW9kYWxDbG9zZUJ0biIsImFkZEZvcm0iLCJzaG93RXJyb3IiLCJjYXJkc0RhdGEiLCJjYXJkcyIsImltZ19saW5rIiwiZmF2b3VyaXRlIiwiZml0Q2FyZHMiLCJjYXJkIiwib2Zmc2V0V2lkdGgiLCJyZW5kZXIiLCJfc2hvd01vZGFsIiwiY2xhc3NMaXN0IiwiY29udGFpbnMiLCJwYXJlbnRFbGVtZW50IiwiYWRkIiwicmVtb3ZlIiwiYWdlIiwicmF0ZSIsImRlc2NyaXB0aW9uIiwiaSIsIkFwcCIsImdldERldGFpbHMiLCJtYWluQ29udGFpbmVyIiwiYXBwVmlldyIsInNob3dFcnJvck1lc3NhZ2UiLCJhZGROZXdDYXQiLCJjbG9zZXN0IiwiZGF0YXNldCIsImFwcE1vZGVsIiwic2hvd0RldGFpbHMiLCJzaG93UHJlbG9hZGVyIiwic2hvd0NhcmRzIiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJ3aW5kb3ciLCJpbml0IiwiX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiY2FjaGVkTW9kdWxlIiwidW5kZWZpbmVkIiwiZXhwb3J0cyIsIm1vZHVsZSIsIl9fd2VicGFja19tb2R1bGVzX18iLCJtIiwiTyIsImNodW5rSWRzIiwicHJpb3JpdHkiLCJub3RGdWxmaWxsZWQiLCJJbmZpbml0eSIsImZ1bGZpbGxlZCIsImoiLCJPYmplY3QiLCJrZXlzIiwiZXZlcnkiLCJzcGxpY2UiLCJyIiwiZyIsImdsb2JhbFRoaXMiLCJGdW5jdGlvbiIsIm8iLCJvYmoiLCJwcm9wIiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiaW5zdGFsbGVkQ2h1bmtzIiwiY2h1bmtJZCIsIndlYnBhY2tKc29ucENhbGxiYWNrIiwicGFyZW50Q2h1bmtMb2FkaW5nRnVuY3Rpb24iLCJtb3JlTW9kdWxlcyIsInJ1bnRpbWUiLCJzb21lIiwiY2h1bmtMb2FkaW5nR2xvYmFsIiwic2VsZiIsInB1c2giLCJfX3dlYnBhY2tfZXhwb3J0c19fIl0sInNvdXJjZVJvb3QiOiIifQ==